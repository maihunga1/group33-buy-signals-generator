2025-04-13 15:23:16,363 - root - INFO - Created directory: models
2025-04-13 15:23:16,363 - root - INFO - Created directory: data
2025-04-13 15:23:16,364 - root - INFO - Created directory: logs
2025-04-13 15:23:16,364 - root - INFO - Created directory: results
2025-04-13 15:23:16,364 - root - INFO - Created directory: plots
2025-04-13 15:23:16,364 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:23:16,364 - __main__ - INFO - Fetching historical data...
2025-04-13 15:23:16,364 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:23:16,364 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14.7; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-13 15:23:16,364 - yfinance - DEBUG - Entering history()
2025-04-13 15:23:16,367 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:23:16,367 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:23:16,380 - yfinance - DEBUG -  Entering history()
2025-04-13 15:23:16,381 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:16,381 - yfinance - DEBUG -   Entering get()
2025-04-13 15:23:16,381 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:23:16,381 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:23:16,381 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:16,381 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:23:16,381 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:23:16,381 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:23:16,381 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:23:16,382 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:23:16,382 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:23:16,382 - yfinance - DEBUG - reusing cookie
2025-04-13 15:23:16,390 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:23:16,600 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:23:16,600 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:23:16,600 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:23:16,600 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:23:16,601 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:23:16,901 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:23:17,017 - yfinance - DEBUG - response code=200
2025-04-13 15:23:17,017 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:23:17,017 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:23:17,027 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:23:17,032 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:23:17,049 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,052 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,052 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:23:17,052 - yfinance - DEBUG - Exiting history()
2025-04-13 15:23:17,052 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:23:17,053 - yfinance - DEBUG - Entering history()
2025-04-13 15:23:17,053 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:23:17,053 - yfinance - DEBUG -  Entering history()
2025-04-13 15:23:17,053 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,053 - yfinance - DEBUG -   Entering get()
2025-04-13 15:23:17,053 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:23:17,053 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:23:17,053 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,053 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:23:17,053 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:23:17,053 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,053 - yfinance - DEBUG - reusing cookie
2025-04-13 15:23:17,053 - yfinance - DEBUG - reusing crumb
2025-04-13 15:23:17,053 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,053 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:23:17,271 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:23:17,359 - yfinance - DEBUG - response code=200
2025-04-13 15:23:17,360 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:23:17,360 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:23:17,367 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:23:17,367 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:23:17,372 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,374 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,374 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:23:17,374 - yfinance - DEBUG - Exiting history()
2025-04-13 15:23:17,374 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:23:17,374 - yfinance - DEBUG - Entering history()
2025-04-13 15:23:17,374 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:23:17,375 - yfinance - DEBUG -  Entering history()
2025-04-13 15:23:17,375 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,375 - yfinance - DEBUG -   Entering get()
2025-04-13 15:23:17,375 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:23:17,375 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:23:17,375 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,375 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:23:17,375 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:23:17,375 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,375 - yfinance - DEBUG - reusing cookie
2025-04-13 15:23:17,375 - yfinance - DEBUG - reusing crumb
2025-04-13 15:23:17,375 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,375 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:23:17,561 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:23:17,580 - yfinance - DEBUG - response code=200
2025-04-13 15:23:17,580 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:23:17,580 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:23:17,585 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:23:17,585 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:23:17,591 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,593 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,594 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:23:17,594 - yfinance - DEBUG - Exiting history()
2025-04-13 15:23:17,594 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:23:17,594 - yfinance - DEBUG - Entering history()
2025-04-13 15:23:17,594 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:23:17,594 - yfinance - DEBUG -  Entering history()
2025-04-13 15:23:17,594 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,594 - yfinance - DEBUG -   Entering get()
2025-04-13 15:23:17,594 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:23:17,594 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:23:17,594 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,594 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:23:17,594 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:23:17,594 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,594 - yfinance - DEBUG - reusing cookie
2025-04-13 15:23:17,594 - yfinance - DEBUG - reusing crumb
2025-04-13 15:23:17,594 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,594 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:23:17,814 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:23:17,833 - yfinance - DEBUG - response code=200
2025-04-13 15:23:17,833 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:23:17,833 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:23:17,838 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:23:17,839 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:23:17,844 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,845 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:17,845 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:23:17,845 - yfinance - DEBUG - Exiting history()
2025-04-13 15:23:17,846 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:23:17,846 - yfinance - DEBUG - Entering history()
2025-04-13 15:23:17,846 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:23:17,846 - yfinance - DEBUG -  Entering history()
2025-04-13 15:23:17,846 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,846 - yfinance - DEBUG -   Entering get()
2025-04-13 15:23:17,846 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:23:17,846 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:23:17,846 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:17,846 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:23:17,846 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:23:17,846 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,846 - yfinance - DEBUG - reusing cookie
2025-04-13 15:23:17,846 - yfinance - DEBUG - reusing crumb
2025-04-13 15:23:17,846 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:23:17,846 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:23:18,068 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:23:18,109 - yfinance - DEBUG - response code=200
2025-04-13 15:23:18,109 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:23:18,109 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:23:18,115 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:23:18,116 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:23:18,121 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:18,123 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:18,123 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:23:18,123 - yfinance - DEBUG - Exiting history()
2025-04-13 15:23:18,123 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:23:18,123 - yfinance - DEBUG - Entering history()
2025-04-13 15:23:18,124 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:23:18,124 - yfinance - DEBUG -  Entering history()
2025-04-13 15:23:18,124 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:18,124 - yfinance - DEBUG -   Entering get()
2025-04-13 15:23:18,124 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:23:18,124 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:23:18,124 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:23:18,124 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:23:18,124 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:23:18,124 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:23:18,124 - yfinance - DEBUG - reusing cookie
2025-04-13 15:23:18,124 - yfinance - DEBUG - reusing crumb
2025-04-13 15:23:18,124 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:23:18,124 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:23:18,284 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:23:18,297 - yfinance - DEBUG - response code=200
2025-04-13 15:23:18,297 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:23:18,297 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:23:18,302 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:23:18,303 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:23:18,304 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:18,307 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:23:18,308 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:23:18,308 - yfinance - DEBUG - Exiting history()
2025-04-13 15:23:18,308 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:23:18,309 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:23:18,309 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:23:18,309 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:23:18,375 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:23:18,378 - __main__ - ERROR - Error in main execution: name 'prepare_features_and_target' is not defined
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 57, in main
    X, y = prepare_features_and_target(historical_data, feature_list)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'prepare_features_and_target' is not defined
2025-04-13 15:24:12,780 - root - INFO - Created directory: models
2025-04-13 15:24:12,781 - root - INFO - Created directory: data
2025-04-13 15:24:12,781 - root - INFO - Created directory: logs
2025-04-13 15:24:12,781 - root - INFO - Created directory: results
2025-04-13 15:24:12,781 - root - INFO - Created directory: plots
2025-04-13 15:24:12,781 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:24:12,781 - __main__ - INFO - Fetching historical data...
2025-04-13 15:24:12,781 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:24:12,781 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-13 15:24:12,781 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:12,782 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:24:12,782 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:24:12,795 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:12,795 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:12,795 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:12,795 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:12,795 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:24:12,795 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:12,795 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:12,795 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:12,795 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:12,796 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:24:12,796 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:24:12,796 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:24:12,796 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:12,805 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:24:13,179 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:24:13,179 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:24:13,179 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:13,179 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:13,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:24:13,450 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:24:13,524 - yfinance - DEBUG - response code=200
2025-04-13 15:24:13,524 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:13,524 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:13,534 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:13,537 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:13,544 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:13,546 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:13,546 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:13,546 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:13,546 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:24:13,547 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:13,547 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:24:13,547 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:13,547 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:13,547 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:13,547 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:13,547 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:24:13,547 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:13,547 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:13,547 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:13,547 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:13,547 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:13,547 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:13,547 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:13,547 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:13,800 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:24:13,895 - yfinance - DEBUG - response code=200
2025-04-13 15:24:13,896 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:13,896 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:13,904 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:13,904 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:13,909 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:13,911 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:13,911 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:13,911 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:13,911 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:24:13,911 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:13,912 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:24:13,912 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:13,912 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:13,912 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:13,912 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:13,912 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:24:13,912 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:13,912 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:13,912 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:13,912 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:13,912 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:13,912 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:13,912 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:13,912 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:14,137 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:24:14,317 - yfinance - DEBUG - response code=200
2025-04-13 15:24:14,318 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:14,318 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:14,324 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:14,325 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:14,332 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:14,336 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:14,336 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:14,336 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:14,336 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:24:14,337 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:14,337 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:24:14,337 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:14,337 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:14,337 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:14,337 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:14,337 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:24:14,337 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:14,337 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:14,337 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:14,337 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:14,337 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:14,337 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:14,337 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:14,337 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:14,547 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:24:14,576 - yfinance - DEBUG - response code=200
2025-04-13 15:24:14,576 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:14,576 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:14,585 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:14,586 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:14,591 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:14,592 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:14,593 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:14,593 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:14,593 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:24:14,593 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:14,593 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:24:14,593 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:14,593 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:14,593 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:14,593 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:14,593 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:24:14,593 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:14,593 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:14,593 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:14,593 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:14,593 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:14,593 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:14,593 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:14,593 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:14,799 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:24:14,817 - yfinance - DEBUG - response code=200
2025-04-13 15:24:14,817 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:14,818 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:14,825 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:14,825 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:14,830 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:14,832 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:14,832 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:14,832 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:14,832 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:24:14,832 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:14,832 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:24:14,832 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:14,832 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:14,832 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:14,832 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:14,832 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:24:14,833 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:14,833 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:14,833 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:14,833 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:14,833 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:14,833 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:14,833 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:14,833 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:15,001 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:24:15,019 - yfinance - DEBUG - response code=200
2025-04-13 15:24:15,020 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:15,020 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:15,025 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:15,026 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:15,028 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:15,030 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:15,030 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:15,030 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:15,030 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:24:15,031 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:24:15,031 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:24:15,031 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:24:15,093 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:24:15,102 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:24:15,106 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:24:15,111 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:24:15,114 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:24:15,119 - model_training - INFO - Original class distribution: [8521 2741]
2025-04-13 15:24:15,189 - model_training - INFO - Class distribution after SMOTE: [8521 8521]
2025-04-13 15:24:15,189 - __main__ - INFO - Training model...
2025-04-13 15:24:15,189 - model_training - INFO - Training Random Forest model...
2025-04-13 15:24:27,448 - __main__ - INFO - Evaluating model...
2025-04-13 15:24:27,449 - model_training - INFO - Evaluating model performance...
2025-04-13 15:24:27,569 - model_training - INFO - Model Accuracy: 0.5900
2025-04-13 15:24:27,569 - model_training - INFO - F1 Score: 0.3524
2025-04-13 15:24:27,569 - model_training - INFO - ROC AUC: 0.5957
2025-04-13 15:24:27,569 - __main__ - INFO - Saving model...
2025-04-13 15:24:27,607 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:24:27,607 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:24:27,607 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:24:27,607 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:27,607 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:24:27,607 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:27,608 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:24:27+10:00', 'period2': '2025-04-13 15:24:27+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:27,609 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:27,609 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:27,609 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:24:27,609 - yfinance - DEBUG - params={'period1': 1744089867, 'period2': 1744521867, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:27,609 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:27,609 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:27,609 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:27,609 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:27,609 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:27,609 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:27,609 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:27,793 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744089867&period2=1744521867&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:24:27,793 - yfinance - DEBUG - response code=200
2025-04-13 15:24:27,793 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:27,793 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:27,794 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:27,795 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:27,800 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:27,801 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:27,802 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:27,802 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:27,802 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:27,802 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:24:27,802 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:27,802 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:24:27+10:00', 'period2': '2025-04-13 15:24:27+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:27,802 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:27,802 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:27,802 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:24:27,802 - yfinance - DEBUG - params={'period1': 1744089867, 'period2': 1744521867, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:27,802 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:27,802 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:27,802 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:27,802 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:27,802 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:27,802 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:27,802 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:28,000 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744089867&period2=1744521867&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:24:28,000 - yfinance - DEBUG - response code=200
2025-04-13 15:24:28,000 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:28,000 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:28,001 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:28,001 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:28,002 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,005 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,005 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:28,005 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:28,005 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:28,005 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:24:28,005 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:28,005 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:24:27+10:00', 'period2': '2025-04-13 15:24:27+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:28,005 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:28,005 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:28,005 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:24:28,006 - yfinance - DEBUG - params={'period1': 1744089867, 'period2': 1744521867, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:28,006 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:28,006 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:28,006 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:28,006 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:28,006 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:28,006 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:28,006 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:28,199 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744089867&period2=1744521867&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:24:28,199 - yfinance - DEBUG - response code=200
2025-04-13 15:24:28,200 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:28,200 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:28,202 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:28,203 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:28,204 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,209 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,209 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:28,209 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:28,209 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:28,210 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:24:28,210 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:28,210 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:24:27+10:00', 'period2': '2025-04-13 15:24:27+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:28,210 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:28,210 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:28,210 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:24:28,210 - yfinance - DEBUG - params={'period1': 1744089867, 'period2': 1744521867, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:28,210 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:28,210 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:28,210 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:28,210 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:28,210 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:28,210 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:28,210 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:28,461 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744089867&period2=1744521867&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:24:28,461 - yfinance - DEBUG - response code=200
2025-04-13 15:24:28,461 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:28,461 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:28,462 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:28,462 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:28,464 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,465 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,465 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:28,465 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:28,465 - yfinance - DEBUG - Entering history()
2025-04-13 15:24:28,466 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:24:28,466 - yfinance - DEBUG -  Entering history()
2025-04-13 15:24:28,466 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:24:27+10:00', 'period2': '2025-04-13 15:24:27+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:28,466 - yfinance - DEBUG -   Entering get()
2025-04-13 15:24:28,466 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:24:28,466 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:24:28,466 - yfinance - DEBUG - params={'period1': 1744089867, 'period2': 1744521867, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:24:28,466 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:24:28,466 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:24:28,466 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:24:28,466 - yfinance - DEBUG - reusing cookie
2025-04-13 15:24:28,466 - yfinance - DEBUG - reusing crumb
2025-04-13 15:24:28,466 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:24:28,466 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:24:28,652 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744089867&period2=1744521867&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:24:28,652 - yfinance - DEBUG - response code=200
2025-04-13 15:24:28,653 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:24:28,653 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:24:28,654 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:24:28,654 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:24:28,656 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,658 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:24:28,658 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:24:28,658 - yfinance - DEBUG - Exiting history()
2025-04-13 15:24:28,658 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:24:28,665 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:24:28,713 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:24:28,722 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:24:28,724 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'NAB.AX', 'WBC.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5496329436154954, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5401964540045872, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5333733507756122, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.5204487035780443, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4879700006620513, 'Recommendation': 'Hold'}]}
2025-04-13 15:24:28,724 - __main__ - INFO - Running backtest...
2025-04-13 15:24:28,724 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:24:28,756 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 183, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<5 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-13 15:28:48,808 - root - INFO - Created directory: models
2025-04-13 15:28:48,808 - root - INFO - Created directory: data
2025-04-13 15:28:48,808 - root - INFO - Created directory: logs
2025-04-13 15:28:48,808 - root - INFO - Created directory: results
2025-04-13 15:28:48,808 - root - INFO - Created directory: plots
2025-04-13 15:28:48,808 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:28:48,808 - __main__ - INFO - Fetching historical data...
2025-04-13 15:28:48,808 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:28:48,808 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-04-13 15:28:48,808 - yfinance - DEBUG - Entering history()
2025-04-13 15:28:48,811 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:28:48,812 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:28:48,825 - yfinance - DEBUG -  Entering history()
2025-04-13 15:28:48,825 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:48,825 - yfinance - DEBUG -   Entering get()
2025-04-13 15:28:48,825 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:28:48,825 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:28:48,825 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:48,825 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:28:48,825 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:28:48,825 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:28:48,826 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:28:48,826 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:28:48,826 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:28:48,826 - yfinance - DEBUG - reusing cookie
2025-04-13 15:28:48,834 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:28:49,053 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:28:49,053 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:28:49,053 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:28:49,053 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:28:49,055 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:28:49,324 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:28:49,500 - yfinance - DEBUG - response code=200
2025-04-13 15:28:49,500 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:28:49,500 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:28:49,512 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:28:49,515 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:28:49,525 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:49,527 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:49,527 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:28:49,527 - yfinance - DEBUG - Exiting history()
2025-04-13 15:28:49,527 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:28:49,527 - yfinance - DEBUG - Entering history()
2025-04-13 15:28:49,528 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:28:49,528 - yfinance - DEBUG -  Entering history()
2025-04-13 15:28:49,528 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:49,528 - yfinance - DEBUG -   Entering get()
2025-04-13 15:28:49,528 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:28:49,528 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:28:49,528 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:49,528 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:28:49,528 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:28:49,528 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:28:49,528 - yfinance - DEBUG - reusing cookie
2025-04-13 15:28:49,528 - yfinance - DEBUG - reusing crumb
2025-04-13 15:28:49,528 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:28:49,528 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:28:49,737 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:28:49,998 - yfinance - DEBUG - response code=200
2025-04-13 15:28:49,999 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:28:49,999 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:28:50,007 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:28:50,008 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:28:50,012 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,014 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,014 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:28:50,014 - yfinance - DEBUG - Exiting history()
2025-04-13 15:28:50,014 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:28:50,014 - yfinance - DEBUG - Entering history()
2025-04-13 15:28:50,015 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:28:50,015 - yfinance - DEBUG -  Entering history()
2025-04-13 15:28:50,015 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,015 - yfinance - DEBUG -   Entering get()
2025-04-13 15:28:50,015 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:28:50,015 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:28:50,015 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,015 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:28:50,015 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:28:50,015 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,015 - yfinance - DEBUG - reusing cookie
2025-04-13 15:28:50,015 - yfinance - DEBUG - reusing crumb
2025-04-13 15:28:50,015 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,015 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:28:50,218 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:28:50,238 - yfinance - DEBUG - response code=200
2025-04-13 15:28:50,239 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:28:50,239 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:28:50,247 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:28:50,248 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:28:50,252 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,254 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,254 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:28:50,254 - yfinance - DEBUG - Exiting history()
2025-04-13 15:28:50,254 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:28:50,255 - yfinance - DEBUG - Entering history()
2025-04-13 15:28:50,255 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:28:50,255 - yfinance - DEBUG -  Entering history()
2025-04-13 15:28:50,255 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,255 - yfinance - DEBUG -   Entering get()
2025-04-13 15:28:50,255 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:28:50,255 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:28:50,255 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,255 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:28:50,255 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:28:50,255 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,255 - yfinance - DEBUG - reusing cookie
2025-04-13 15:28:50,255 - yfinance - DEBUG - reusing crumb
2025-04-13 15:28:50,255 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,255 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:28:50,451 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:28:50,624 - yfinance - DEBUG - response code=200
2025-04-13 15:28:50,624 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:28:50,624 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:28:50,631 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:28:50,632 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:28:50,636 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,638 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,638 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:28:50,638 - yfinance - DEBUG - Exiting history()
2025-04-13 15:28:50,639 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:28:50,639 - yfinance - DEBUG - Entering history()
2025-04-13 15:28:50,639 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:28:50,639 - yfinance - DEBUG -  Entering history()
2025-04-13 15:28:50,639 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,639 - yfinance - DEBUG -   Entering get()
2025-04-13 15:28:50,639 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:28:50,639 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:28:50,639 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,639 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:28:50,639 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:28:50,639 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,639 - yfinance - DEBUG - reusing cookie
2025-04-13 15:28:50,639 - yfinance - DEBUG - reusing crumb
2025-04-13 15:28:50,639 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,639 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:28:50,871 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:28:50,970 - yfinance - DEBUG - response code=200
2025-04-13 15:28:50,970 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:28:50,971 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:28:50,978 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:28:50,979 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:28:50,983 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,985 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:50,985 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:28:50,985 - yfinance - DEBUG - Exiting history()
2025-04-13 15:28:50,985 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:28:50,985 - yfinance - DEBUG - Entering history()
2025-04-13 15:28:50,985 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:28:50,986 - yfinance - DEBUG -  Entering history()
2025-04-13 15:28:50,986 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,986 - yfinance - DEBUG -   Entering get()
2025-04-13 15:28:50,986 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:28:50,986 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:28:50,986 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:28:50,986 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:28:50,986 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:28:50,986 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,986 - yfinance - DEBUG - reusing cookie
2025-04-13 15:28:50,986 - yfinance - DEBUG - reusing crumb
2025-04-13 15:28:50,986 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:28:50,986 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:28:51,146 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:28:51,164 - yfinance - DEBUG - response code=200
2025-04-13 15:28:51,164 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:28:51,164 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:28:51,169 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:28:51,170 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:28:51,172 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:51,174 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:28:51,174 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:28:51,174 - yfinance - DEBUG - Exiting history()
2025-04-13 15:28:51,174 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:28:51,175 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:28:51,175 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:28:51,175 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:28:51,239 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:28:51,248 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:28:51,252 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:28:51,257 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:28:51,260 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:28:51,266 - model_training - INFO - Original class distribution: [8522 2740]
2025-04-13 15:28:51,306 - model_training - INFO - Class distribution after SMOTE: [8522 8522]
2025-04-13 15:28:51,306 - __main__ - INFO - Training model...
2025-04-13 15:28:51,307 - model_training - INFO - Training Random Forest model...
2025-04-13 15:29:03,622 - __main__ - INFO - Evaluating model...
2025-04-13 15:29:03,622 - model_training - INFO - Evaluating model performance...
2025-04-13 15:29:03,742 - model_training - INFO - Model Accuracy: 0.5813
2025-04-13 15:29:03,742 - model_training - INFO - F1 Score: 0.3510
2025-04-13 15:29:03,742 - model_training - INFO - ROC AUC: 0.5898
2025-04-13 15:29:03,742 - __main__ - INFO - Saving model...
2025-04-13 15:29:03,779 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:29:03,780 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:29:03,780 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:29:03,780 - yfinance - DEBUG - Entering history()
2025-04-13 15:29:03,780 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:29:03,780 - yfinance - DEBUG -  Entering history()
2025-04-13 15:29:03,781 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:29:03+10:00', 'period2': '2025-04-13 15:29:03+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:03,781 - yfinance - DEBUG -   Entering get()
2025-04-13 15:29:03,781 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:29:03,781 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:29:03,781 - yfinance - DEBUG - params={'period1': 1744090143, 'period2': 1744522143, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:03,781 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:29:03,781 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:29:03,781 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:29:03,781 - yfinance - DEBUG - reusing cookie
2025-04-13 15:29:03,781 - yfinance - DEBUG - reusing crumb
2025-04-13 15:29:03,781 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:29:03,781 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:29:03,951 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090143&period2=1744522143&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:29:03,952 - yfinance - DEBUG - response code=200
2025-04-13 15:29:03,952 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:29:03,952 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:29:03,953 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:29:03,954 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:29:03,958 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:03,960 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:03,960 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:29:03,960 - yfinance - DEBUG - Exiting history()
2025-04-13 15:29:03,961 - yfinance - DEBUG - Entering history()
2025-04-13 15:29:03,961 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:29:03,961 - yfinance - DEBUG -  Entering history()
2025-04-13 15:29:03,961 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:29:03+10:00', 'period2': '2025-04-13 15:29:03+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:03,961 - yfinance - DEBUG -   Entering get()
2025-04-13 15:29:03,961 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:29:03,961 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:29:03,961 - yfinance - DEBUG - params={'period1': 1744090143, 'period2': 1744522143, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:03,961 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:29:03,961 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:29:03,961 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:29:03,961 - yfinance - DEBUG - reusing cookie
2025-04-13 15:29:03,961 - yfinance - DEBUG - reusing crumb
2025-04-13 15:29:03,961 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:29:03,962 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:29:04,158 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090143&period2=1744522143&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:29:04,161 - yfinance - DEBUG - response code=200
2025-04-13 15:29:04,162 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:29:04,162 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:29:04,166 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:29:04,167 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:29:04,168 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,170 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,170 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:29:04,170 - yfinance - DEBUG - Exiting history()
2025-04-13 15:29:04,170 - yfinance - DEBUG - Entering history()
2025-04-13 15:29:04,170 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:29:04,171 - yfinance - DEBUG -  Entering history()
2025-04-13 15:29:04,171 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:29:03+10:00', 'period2': '2025-04-13 15:29:03+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:04,171 - yfinance - DEBUG -   Entering get()
2025-04-13 15:29:04,171 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:29:04,171 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:29:04,171 - yfinance - DEBUG - params={'period1': 1744090143, 'period2': 1744522143, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:04,171 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:29:04,171 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:29:04,171 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:29:04,171 - yfinance - DEBUG - reusing cookie
2025-04-13 15:29:04,171 - yfinance - DEBUG - reusing crumb
2025-04-13 15:29:04,171 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:29:04,171 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:29:04,484 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090143&period2=1744522143&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:29:04,485 - yfinance - DEBUG - response code=200
2025-04-13 15:29:04,485 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:29:04,485 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:29:04,486 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:29:04,487 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:29:04,489 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,490 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,490 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:29:04,490 - yfinance - DEBUG - Exiting history()
2025-04-13 15:29:04,490 - yfinance - DEBUG - Entering history()
2025-04-13 15:29:04,491 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:29:04,491 - yfinance - DEBUG -  Entering history()
2025-04-13 15:29:04,491 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:29:03+10:00', 'period2': '2025-04-13 15:29:03+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:04,491 - yfinance - DEBUG -   Entering get()
2025-04-13 15:29:04,491 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:29:04,491 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:29:04,491 - yfinance - DEBUG - params={'period1': 1744090143, 'period2': 1744522143, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:04,491 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:29:04,491 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:29:04,491 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:29:04,491 - yfinance - DEBUG - reusing cookie
2025-04-13 15:29:04,491 - yfinance - DEBUG - reusing crumb
2025-04-13 15:29:04,491 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:29:04,491 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:29:04,666 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090143&period2=1744522143&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:29:04,666 - yfinance - DEBUG - response code=200
2025-04-13 15:29:04,666 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:29:04,666 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:29:04,666 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:29:04,667 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:29:04,668 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,669 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,670 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:29:04,670 - yfinance - DEBUG - Exiting history()
2025-04-13 15:29:04,670 - yfinance - DEBUG - Entering history()
2025-04-13 15:29:04,670 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:29:04,670 - yfinance - DEBUG -  Entering history()
2025-04-13 15:29:04,670 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:29:03+10:00', 'period2': '2025-04-13 15:29:03+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:04,670 - yfinance - DEBUG -   Entering get()
2025-04-13 15:29:04,670 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:29:04,670 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:29:04,670 - yfinance - DEBUG - params={'period1': 1744090143, 'period2': 1744522143, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:29:04,670 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:29:04,670 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:29:04,670 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:29:04,670 - yfinance - DEBUG - reusing cookie
2025-04-13 15:29:04,670 - yfinance - DEBUG - reusing crumb
2025-04-13 15:29:04,670 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:29:04,670 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:29:04,858 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090143&period2=1744522143&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:29:04,859 - yfinance - DEBUG - response code=200
2025-04-13 15:29:04,859 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:29:04,859 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:29:04,861 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:29:04,862 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:29:04,863 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,866 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:29:04,866 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:29:04,866 - yfinance - DEBUG - Exiting history()
2025-04-13 15:29:04,866 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:29:04,875 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:29:04,924 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:29:04,933 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:29:04,935 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'WBC.AX', 'NAB.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5552082671929268, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5328531642231755, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.5129210864090591, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5063863478593403, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4606075529679293, 'Recommendation': 'Hold'}]}
2025-04-13 15:29:04,935 - __main__ - INFO - Running backtest...
2025-04-13 15:29:04,935 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:29:04,964 - backtest_engine - INFO - Running backtest...
2025-04-13 15:29:04,964 - backtest_engine - INFO - Initial portfolio value: $100000.00
2025-04-13 15:29:04,964 - __main__ - ERROR - Error in main execution: cannot convert the series to <class 'float'>
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 208, in run_backtest
    results = cerebro.run()
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/cerebro.py", line 1132, in run
    runstrat = self.runstrategies(iterstrat)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/cerebro.py", line 1217, in runstrategies
    data.preload()
    ~~~~~~~~~~~~^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/feed.py", line 439, in preload
    while self.load():
          ~~~~~~~~~^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/feed.py", line 480, in load
    _loadret = self._load()
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/feeds/pandafeed.py", line 255, in _load
    line[0] = self.p.dataname.iloc[self._idx, colindex]
    ~~~~^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/linebuffer.py", line 222, in __setitem__
    self.array[self.idx + ago] = value
    ~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/pandas/core/series.py", line 248, in wrapper
    raise TypeError(f"cannot convert the series to {converter}")
TypeError: cannot convert the series to <class 'float'>
2025-04-13 15:31:38,170 - root - INFO - Created directory: models
2025-04-13 15:31:38,170 - root - INFO - Created directory: data
2025-04-13 15:31:38,170 - root - INFO - Created directory: logs
2025-04-13 15:31:38,170 - root - INFO - Created directory: results
2025-04-13 15:31:38,170 - root - INFO - Created directory: plots
2025-04-13 15:31:38,170 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:31:38,170 - __main__ - INFO - Fetching historical data...
2025-04-13 15:31:38,170 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:31:38,171 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-04-13 15:31:38,171 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:38,172 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:31:38,172 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:31:38,184 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:38,185 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:38,185 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:38,185 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:38,185 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:31:38,185 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:38,185 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:38,185 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:38,185 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:38,185 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:31:38,185 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:31:38,186 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:31:38,186 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:38,194 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:31:38,420 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:31:38,421 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:31:38,421 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:38,422 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:38,423 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:31:38,675 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:31:38,771 - yfinance - DEBUG - response code=200
2025-04-13 15:31:38,771 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:38,771 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:38,777 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:38,779 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:38,786 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:38,788 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:38,788 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:38,788 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:38,788 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:31:38,788 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:38,789 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:31:38,789 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:38,789 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:38,789 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:38,789 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:38,789 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:31:38,789 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:38,789 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:38,789 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:38,789 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:38,789 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:38,789 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:38,789 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:38,789 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:39,017 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:31:39,115 - yfinance - DEBUG - response code=200
2025-04-13 15:31:39,116 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:39,116 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:39,123 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:39,124 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:39,128 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:39,130 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:39,130 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:39,130 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:39,130 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:31:39,130 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:39,131 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:31:39,131 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:39,131 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:39,131 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:39,131 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:39,131 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:31:39,131 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:39,131 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:39,131 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:39,131 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:39,131 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:39,131 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:39,131 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:39,131 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:39,329 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:31:39,346 - yfinance - DEBUG - response code=200
2025-04-13 15:31:39,346 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:39,346 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:39,351 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:39,352 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:39,356 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:39,358 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:39,358 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:39,358 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:39,358 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:31:39,358 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:39,358 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:31:39,358 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:39,358 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:39,358 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:39,359 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:39,359 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:31:39,359 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:39,359 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:39,359 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:39,359 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:39,359 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:39,359 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:39,359 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:39,359 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:39,584 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:31:39,768 - yfinance - DEBUG - response code=200
2025-04-13 15:31:39,769 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:39,769 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:39,775 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:39,776 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:39,781 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:39,785 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:39,785 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:39,785 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:39,786 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:31:39,786 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:39,786 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:31:39,786 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:39,786 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:39,786 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:39,786 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:39,786 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:31:39,786 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:39,786 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:39,786 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:39,786 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:39,787 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:39,787 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:39,787 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:39,787 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:40,243 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:31:40,403 - yfinance - DEBUG - response code=200
2025-04-13 15:31:40,403 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:40,403 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:40,408 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:40,409 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:40,413 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:40,415 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:40,416 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:40,416 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:40,416 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:31:40,416 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:40,416 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:31:40,416 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:40,416 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:40,416 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:40,416 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:40,416 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:31:40,416 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:40,416 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:40,416 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:40,416 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:40,416 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:40,416 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:40,416 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:40,416 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:40,559 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:31:40,654 - yfinance - DEBUG - response code=200
2025-04-13 15:31:40,654 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:40,654 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:40,658 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:40,659 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:40,661 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:40,664 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:40,664 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:40,664 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:40,665 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:31:40,666 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:31:40,666 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:31:40,666 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:31:40,734 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:31:40,744 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:31:40,749 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:31:40,754 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:31:40,756 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:31:40,761 - model_training - INFO - Original class distribution: [8521 2741]
2025-04-13 15:31:40,797 - model_training - INFO - Class distribution after SMOTE: [8521 8521]
2025-04-13 15:31:40,797 - __main__ - INFO - Training model...
2025-04-13 15:31:40,797 - model_training - INFO - Training Random Forest model...
2025-04-13 15:31:52,893 - __main__ - INFO - Evaluating model...
2025-04-13 15:31:52,893 - model_training - INFO - Evaluating model performance...
2025-04-13 15:31:53,011 - model_training - INFO - Model Accuracy: 0.5920
2025-04-13 15:31:53,011 - model_training - INFO - F1 Score: 0.3582
2025-04-13 15:31:53,011 - model_training - INFO - ROC AUC: 0.5965
2025-04-13 15:31:53,011 - __main__ - INFO - Saving model...
2025-04-13 15:31:53,047 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:31:53,047 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:31:53,047 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:31:53,048 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:53,048 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:31:53,048 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:53,048 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:31:53+10:00', 'period2': '2025-04-13 15:31:53+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,048 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:53,048 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:53,048 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:31:53,048 - yfinance - DEBUG - params={'period1': 1744090313, 'period2': 1744522313, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,048 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:53,048 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:53,048 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,048 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:53,048 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:53,048 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,048 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:53,244 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090313&period2=1744522313&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:31:53,245 - yfinance - DEBUG - response code=200
2025-04-13 15:31:53,245 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:53,245 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:53,246 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:53,247 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:53,249 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,250 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,250 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:53,250 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:53,251 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:53,251 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:31:53,251 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:53,251 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:31:53+10:00', 'period2': '2025-04-13 15:31:53+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,251 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:53,251 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:53,251 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:31:53,251 - yfinance - DEBUG - params={'period1': 1744090313, 'period2': 1744522313, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,251 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:53,251 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:53,251 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,251 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:53,251 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:53,251 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,251 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:53,446 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090313&period2=1744522313&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:31:53,448 - yfinance - DEBUG - response code=200
2025-04-13 15:31:53,448 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:53,448 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:53,451 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:53,452 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:53,454 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,456 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,456 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:53,456 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:53,456 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:53,456 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:31:53,456 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:53,457 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:31:53+10:00', 'period2': '2025-04-13 15:31:53+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,457 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:53,457 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:53,457 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:31:53,457 - yfinance - DEBUG - params={'period1': 1744090313, 'period2': 1744522313, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,457 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:53,457 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:53,457 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,457 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:53,457 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:53,457 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,457 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:53,791 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090313&period2=1744522313&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:31:53,792 - yfinance - DEBUG - response code=200
2025-04-13 15:31:53,792 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:53,792 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:53,793 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:53,794 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:53,797 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,799 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,799 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:53,799 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:53,799 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:53,799 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:31:53,799 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:53,799 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:31:53+10:00', 'period2': '2025-04-13 15:31:53+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,799 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:53,799 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:53,799 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:31:53,799 - yfinance - DEBUG - params={'period1': 1744090313, 'period2': 1744522313, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,799 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:53,799 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:53,799 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,799 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:53,799 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:53,799 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,800 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:53,983 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090313&period2=1744522313&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:31:53,984 - yfinance - DEBUG - response code=200
2025-04-13 15:31:53,985 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:53,985 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:53,985 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:53,986 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:53,987 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,989 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:53,989 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:53,989 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:53,989 - yfinance - DEBUG - Entering history()
2025-04-13 15:31:53,989 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:31:53,989 - yfinance - DEBUG -  Entering history()
2025-04-13 15:31:53,989 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:31:53+10:00', 'period2': '2025-04-13 15:31:53+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,989 - yfinance - DEBUG -   Entering get()
2025-04-13 15:31:53,989 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:31:53,989 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:31:53,989 - yfinance - DEBUG - params={'period1': 1744090313, 'period2': 1744522313, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:31:53,989 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:31:53,989 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:31:53,989 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,989 - yfinance - DEBUG - reusing cookie
2025-04-13 15:31:53,989 - yfinance - DEBUG - reusing crumb
2025-04-13 15:31:53,989 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:31:53,989 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:31:54,176 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090313&period2=1744522313&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:31:54,176 - yfinance - DEBUG - response code=200
2025-04-13 15:31:54,176 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:31:54,176 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:31:54,177 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:31:54,177 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:31:54,179 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:54,181 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:31:54,181 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:31:54,181 - yfinance - DEBUG - Exiting history()
2025-04-13 15:31:54,181 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:31:54,188 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:31:54,236 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:31:54,243 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:31:54,245 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'NAB.AX', 'WBC.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5626573366410679, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5603201038394062, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5294424593076804, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.5149028797446349, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.51185729884938, 'Recommendation': 'Hold'}]}
2025-04-13 15:31:54,245 - __main__ - INFO - Running backtest...
2025-04-13 15:31:54,245 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:31:54,245 - __main__ - ERROR - Error in main execution: name 'MLDataLoader' is not defined
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 154, in run_backtest
    bt_data = MLDataLoader.prepare_backtrader_data(historical_data, prediction_data)
              ^^^^^^^^^^^^
NameError: name 'MLDataLoader' is not defined
2025-04-13 15:35:59,511 - root - INFO - Created directory: models
2025-04-13 15:35:59,512 - root - INFO - Created directory: data
2025-04-13 15:35:59,512 - root - INFO - Created directory: logs
2025-04-13 15:35:59,512 - root - INFO - Created directory: results
2025-04-13 15:35:59,512 - root - INFO - Created directory: plots
2025-04-13 15:35:59,512 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:35:59,512 - __main__ - INFO - Fetching historical data...
2025-04-13 15:35:59,512 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:35:59,512 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-04-13 15:35:59,512 - yfinance - DEBUG - Entering history()
2025-04-13 15:35:59,515 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:35:59,515 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:35:59,529 - yfinance - DEBUG -  Entering history()
2025-04-13 15:35:59,529 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:35:59,529 - yfinance - DEBUG -   Entering get()
2025-04-13 15:35:59,529 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:35:59,529 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:35:59,529 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:35:59,529 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:35:59,529 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:35:59,529 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:35:59,530 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:35:59,530 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:35:59,530 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:35:59,530 - yfinance - DEBUG - reusing cookie
2025-04-13 15:35:59,541 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:35:59,750 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:35:59,750 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:35:59,750 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:35:59,750 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:35:59,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:36:00,031 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:36:00,215 - yfinance - DEBUG - response code=200
2025-04-13 15:36:00,216 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:00,216 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:00,226 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:00,230 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:00,240 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:00,242 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:00,243 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:00,243 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:00,243 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:36:00,243 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:00,243 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:36:00,243 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:00,243 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:00,243 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:00,243 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:00,243 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:36:00,243 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:00,243 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:00,243 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:00,243 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:00,243 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:00,243 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:00,243 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:00,243 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:00,457 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:36:00,552 - yfinance - DEBUG - response code=200
2025-04-13 15:36:00,552 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:00,553 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:00,560 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:00,561 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:00,566 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:00,567 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:00,568 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:00,568 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:00,568 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:36:00,568 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:00,568 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:36:00,568 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:00,568 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:00,568 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:00,568 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:00,568 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:36:00,568 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:00,568 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:00,568 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:00,568 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:00,568 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:00,568 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:00,568 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:00,568 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:00,771 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:36:00,956 - yfinance - DEBUG - response code=200
2025-04-13 15:36:00,956 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:00,956 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:00,962 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:00,963 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:00,968 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:00,970 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:00,970 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:00,970 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:00,970 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:36:00,970 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:00,970 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:36:00,970 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:00,970 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:00,970 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:00,970 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:00,970 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:36:00,970 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:00,970 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:00,970 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:00,970 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:00,970 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:00,970 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:00,970 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:00,971 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:01,179 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:36:01,266 - yfinance - DEBUG - response code=200
2025-04-13 15:36:01,267 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:01,267 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:01,274 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:01,275 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:01,279 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:01,281 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:01,281 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:01,281 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:01,282 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:36:01,282 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:01,282 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:36:01,282 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:01,282 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:01,282 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:01,282 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:01,282 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:36:01,282 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:01,282 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:01,282 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:01,282 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:01,282 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:01,282 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:01,282 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:01,282 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:01,485 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:36:01,507 - yfinance - DEBUG - response code=200
2025-04-13 15:36:01,508 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:01,508 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:01,516 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:01,518 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:01,523 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:01,526 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:01,526 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:01,526 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:01,526 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:36:01,526 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:01,527 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:36:01,527 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:01,527 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:01,527 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:01,527 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:01,527 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:36:01,527 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:01,527 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:01,527 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:01,527 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:01,527 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:01,527 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:01,527 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:01,527 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:01,694 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:36:01,726 - yfinance - DEBUG - response code=200
2025-04-13 15:36:01,726 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:01,726 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:01,733 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:01,734 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:01,735 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:01,737 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:01,738 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:01,738 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:01,738 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:36:01,738 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:36:01,738 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:36:01,738 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:36:01,805 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:36:01,813 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:36:01,817 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:36:01,822 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:36:01,824 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:36:01,829 - model_training - INFO - Original class distribution: [8522 2740]
2025-04-13 15:36:01,872 - model_training - INFO - Class distribution after SMOTE: [8522 8522]
2025-04-13 15:36:01,872 - __main__ - INFO - Training model...
2025-04-13 15:36:01,872 - model_training - INFO - Training Random Forest model...
2025-04-13 15:36:14,119 - __main__ - INFO - Evaluating model...
2025-04-13 15:36:14,119 - model_training - INFO - Evaluating model performance...
2025-04-13 15:36:14,240 - model_training - INFO - Model Accuracy: 0.5837
2025-04-13 15:36:14,240 - model_training - INFO - F1 Score: 0.3516
2025-04-13 15:36:14,240 - model_training - INFO - ROC AUC: 0.5896
2025-04-13 15:36:14,240 - __main__ - INFO - Saving model...
2025-04-13 15:36:14,278 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:36:14,278 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:36:14,278 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:36:14,278 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:14,278 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:36:14,279 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:14,279 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:36:14+10:00', 'period2': '2025-04-13 15:36:14+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,279 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:14,279 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:14,279 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:36:14,279 - yfinance - DEBUG - params={'period1': 1744090574, 'period2': 1744522574, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,279 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:14,279 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:14,279 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,279 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:14,279 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:14,279 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,279 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:14,451 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090574&period2=1744522574&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:36:14,451 - yfinance - DEBUG - response code=200
2025-04-13 15:36:14,451 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:14,451 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:14,452 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:14,452 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:14,455 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:14,457 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:14,457 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:14,457 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:14,457 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:14,457 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:36:14,457 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:14,458 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:36:14+10:00', 'period2': '2025-04-13 15:36:14+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,458 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:14,458 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:14,458 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:36:14,458 - yfinance - DEBUG - params={'period1': 1744090574, 'period2': 1744522574, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,458 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:14,458 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:14,458 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,458 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:14,458 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:14,458 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,458 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:14,642 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090574&period2=1744522574&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:36:14,643 - yfinance - DEBUG - response code=200
2025-04-13 15:36:14,643 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:14,643 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:14,647 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:14,647 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:14,649 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:14,651 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:14,651 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:14,651 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:14,651 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:14,652 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:36:14,652 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:14,652 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:36:14+10:00', 'period2': '2025-04-13 15:36:14+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,652 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:14,652 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:14,652 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:36:14,652 - yfinance - DEBUG - params={'period1': 1744090574, 'period2': 1744522574, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,652 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:14,652 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:14,652 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,652 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:14,652 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:14,652 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,652 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:14,816 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090574&period2=1744522574&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:36:14,816 - yfinance - DEBUG - response code=200
2025-04-13 15:36:14,817 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:14,817 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:14,819 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:14,819 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:14,821 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:14,823 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:14,823 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:14,823 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:14,823 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:14,824 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:36:14,824 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:14,824 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:36:14+10:00', 'period2': '2025-04-13 15:36:14+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,824 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:14,824 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:14,824 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:36:14,824 - yfinance - DEBUG - params={'period1': 1744090574, 'period2': 1744522574, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:14,824 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:14,824 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:14,824 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,824 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:14,824 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:14,824 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:14,824 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:14,996 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090574&period2=1744522574&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:36:14,997 - yfinance - DEBUG - response code=200
2025-04-13 15:36:14,997 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:14,997 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:14,999 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:15,000 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:15,001 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:15,003 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:15,003 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:15,003 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:15,003 - yfinance - DEBUG - Entering history()
2025-04-13 15:36:15,003 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:36:15,004 - yfinance - DEBUG -  Entering history()
2025-04-13 15:36:15,004 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:36:14+10:00', 'period2': '2025-04-13 15:36:14+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:15,004 - yfinance - DEBUG -   Entering get()
2025-04-13 15:36:15,004 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:36:15,004 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:36:15,004 - yfinance - DEBUG - params={'period1': 1744090574, 'period2': 1744522574, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:36:15,004 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:36:15,004 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:36:15,004 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:36:15,004 - yfinance - DEBUG - reusing cookie
2025-04-13 15:36:15,004 - yfinance - DEBUG - reusing crumb
2025-04-13 15:36:15,004 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:36:15,004 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:36:15,222 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090574&period2=1744522574&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:36:15,222 - yfinance - DEBUG - response code=200
2025-04-13 15:36:15,222 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:36:15,222 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:36:15,223 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:36:15,223 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:36:15,224 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:15,226 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:36:15,226 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:36:15,226 - yfinance - DEBUG - Exiting history()
2025-04-13 15:36:15,227 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:36:15,235 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:36:15,280 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:36:15,289 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:36:15,290 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'NAB.AX', 'WBC.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5643943851290447, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5408907393049113, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5087143591106031, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.506558093362558, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.46263785146049197, 'Recommendation': 'Hold'}]}
2025-04-13 15:36:15,290 - __main__ - INFO - Running backtest...
2025-04-13 15:36:15,291 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:36:15,331 - __main__ - ERROR - Error in main execution: 'int' object has no attribute 'fillna'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 161, in run_backtest
    bt_data = MLDataLoader.prepare_backtrader_data(historical_data, prediction_data)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 133, in prepare_backtrader_data
    ticker_df['Buy_Signal'] = ticker_df.get('Buy_Signal', 0).fillna(0).astype(int)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'fillna'
2025-04-13 15:37:37,304 - root - INFO - Created directory: models
2025-04-13 15:37:37,305 - root - INFO - Created directory: data
2025-04-13 15:37:37,305 - root - INFO - Created directory: logs
2025-04-13 15:37:37,305 - root - INFO - Created directory: results
2025-04-13 15:37:37,305 - root - INFO - Created directory: plots
2025-04-13 15:37:37,305 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:37:37,305 - __main__ - INFO - Fetching historical data...
2025-04-13 15:37:37,305 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:37:37,305 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-13 15:37:37,305 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:37,306 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:37:37,306 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:37:37,320 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:37,320 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:37,320 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:37,320 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:37,320 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:37:37,320 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:37,320 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:37,320 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:37,320 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:37,320 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:37:37,321 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:37:37,321 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:37:37,321 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:37,330 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:37:37,575 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:37:37,576 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:37:37,576 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:37,576 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:37,579 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:37:37,850 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:37:38,030 - yfinance - DEBUG - response code=200
2025-04-13 15:37:38,030 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:38,030 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:38,035 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:38,037 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:38,044 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,047 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,047 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:38,047 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:38,047 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:37:38,047 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:38,047 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:37:38,048 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:38,048 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,048 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:38,048 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:38,048 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:37:38,048 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,048 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:38,048 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:38,048 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,048 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:38,048 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:38,048 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,048 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:38,293 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:37:38,386 - yfinance - DEBUG - response code=200
2025-04-13 15:37:38,387 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:38,387 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:38,393 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:38,394 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:38,400 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,402 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,402 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:38,402 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:38,402 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:37:38,402 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:38,402 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:37:38,402 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:38,402 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,402 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:38,402 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:38,402 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:37:38,402 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,402 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:38,402 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:38,402 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,402 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:38,402 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:38,402 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,402 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:38,615 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:37:38,638 - yfinance - DEBUG - response code=200
2025-04-13 15:37:38,638 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:38,638 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:38,644 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:38,645 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:38,651 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,653 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,653 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:38,653 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:38,654 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:37:38,654 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:38,654 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:37:38,654 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:38,654 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,654 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:38,654 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:38,654 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:37:38,654 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,654 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:38,654 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:38,654 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,654 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:38,654 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:38,654 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,654 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:38,845 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:37:38,862 - yfinance - DEBUG - response code=200
2025-04-13 15:37:38,864 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:38,864 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:38,871 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:38,871 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:38,876 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,878 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:38,878 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:38,878 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:38,878 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:37:38,878 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:38,878 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:37:38,878 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:38,878 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,878 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:38,878 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:38,878 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:37:38,878 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:38,878 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:38,878 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:38,878 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,879 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:38,879 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:38,879 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:38,879 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:39,072 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:37:39,098 - yfinance - DEBUG - response code=200
2025-04-13 15:37:39,099 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:39,099 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:39,105 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:39,107 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:39,112 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:39,114 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:39,115 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:39,115 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:39,115 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:37:39,115 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:39,115 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:37:39,115 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:39,115 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:39,115 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:39,115 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:39,115 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:37:39,115 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:39,115 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:39,115 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:39,115 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:39,115 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:39,115 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:39,115 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:39,115 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:39,268 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:37:39,289 - yfinance - DEBUG - response code=200
2025-04-13 15:37:39,289 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:39,289 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:39,292 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:39,293 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:39,295 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:39,297 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:39,297 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:39,297 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:39,297 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:37:39,298 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:37:39,298 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:37:39,298 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:37:39,364 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:37:39,374 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:37:39,379 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:37:39,385 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:37:39,389 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:37:39,394 - model_training - INFO - Original class distribution: [8522 2740]
2025-04-13 15:37:39,443 - model_training - INFO - Class distribution after SMOTE: [8522 8522]
2025-04-13 15:37:39,443 - __main__ - INFO - Training model...
2025-04-13 15:37:39,443 - model_training - INFO - Training Random Forest model...
2025-04-13 15:37:51,810 - __main__ - INFO - Evaluating model...
2025-04-13 15:37:51,810 - model_training - INFO - Evaluating model performance...
2025-04-13 15:37:51,927 - model_training - INFO - Model Accuracy: 0.5803
2025-04-13 15:37:51,927 - model_training - INFO - F1 Score: 0.3511
2025-04-13 15:37:51,927 - model_training - INFO - ROC AUC: 0.5894
2025-04-13 15:37:51,927 - __main__ - INFO - Saving model...
2025-04-13 15:37:51,966 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:37:51,966 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:37:51,966 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:37:51,966 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:51,966 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:37:51,966 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:51,966 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:37:51+10:00', 'period2': '2025-04-13 15:37:51+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:51,966 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:51,967 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:51,967 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:37:51,967 - yfinance - DEBUG - params={'period1': 1744090671, 'period2': 1744522671, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:51,967 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:51,967 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:51,967 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:51,967 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:51,967 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:51,967 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:51,967 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:52,134 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090671&period2=1744522671&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:37:52,134 - yfinance - DEBUG - response code=200
2025-04-13 15:37:52,134 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:52,134 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:52,135 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:52,136 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:52,138 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,142 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,142 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:52,142 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:52,142 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:52,143 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:37:52,143 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:52,143 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:37:51+10:00', 'period2': '2025-04-13 15:37:51+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,143 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:52,143 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:52,143 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:37:52,143 - yfinance - DEBUG - params={'period1': 1744090671, 'period2': 1744522671, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,143 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:52,143 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:52,143 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,143 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:52,143 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:52,143 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,143 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:52,341 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090671&period2=1744522671&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:37:52,341 - yfinance - DEBUG - response code=200
2025-04-13 15:37:52,341 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:52,341 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:52,343 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:52,344 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:52,346 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,348 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,348 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:52,348 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:52,349 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:52,349 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:37:52,349 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:52,349 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:37:51+10:00', 'period2': '2025-04-13 15:37:51+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,349 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:52,349 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:52,349 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:37:52,349 - yfinance - DEBUG - params={'period1': 1744090671, 'period2': 1744522671, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,349 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:52,349 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:52,349 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,349 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:52,349 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:52,349 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,349 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:52,538 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090671&period2=1744522671&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:37:52,539 - yfinance - DEBUG - response code=200
2025-04-13 15:37:52,539 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:52,539 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:52,539 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:52,540 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:52,541 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,543 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,543 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:52,543 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:52,543 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:52,543 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:37:52,543 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:52,543 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:37:51+10:00', 'period2': '2025-04-13 15:37:51+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,543 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:52,543 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:52,543 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:37:52,543 - yfinance - DEBUG - params={'period1': 1744090671, 'period2': 1744522671, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,543 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:52,543 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:52,543 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,543 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:52,543 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:52,543 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,543 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:52,758 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090671&period2=1744522671&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:37:52,759 - yfinance - DEBUG - response code=200
2025-04-13 15:37:52,759 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:52,759 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:52,759 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:52,760 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:52,761 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,763 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,763 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:52,763 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:52,763 - yfinance - DEBUG - Entering history()
2025-04-13 15:37:52,764 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:37:52,764 - yfinance - DEBUG -  Entering history()
2025-04-13 15:37:52,764 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:37:51+10:00', 'period2': '2025-04-13 15:37:51+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,764 - yfinance - DEBUG -   Entering get()
2025-04-13 15:37:52,764 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:37:52,764 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:37:52,764 - yfinance - DEBUG - params={'period1': 1744090671, 'period2': 1744522671, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:37:52,764 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:37:52,764 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:37:52,764 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,764 - yfinance - DEBUG - reusing cookie
2025-04-13 15:37:52,764 - yfinance - DEBUG - reusing crumb
2025-04-13 15:37:52,764 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:37:52,764 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:37:52,965 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090671&period2=1744522671&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:37:52,965 - yfinance - DEBUG - response code=200
2025-04-13 15:37:52,965 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:37:52,965 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:37:52,966 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:37:52,966 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:37:52,967 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,969 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:37:52,969 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:37:52,969 - yfinance - DEBUG - Exiting history()
2025-04-13 15:37:52,970 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:37:52,978 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:37:53,029 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:37:53,036 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:37:53,038 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'WBC.AX', 'NAB.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5601433321279917, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5281884132653211, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.5080915464089375, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5012181905282277, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4676445900049664, 'Recommendation': 'Hold'}]}
2025-04-13 15:37:53,038 - __main__ - INFO - Running backtest...
2025-04-13 15:37:53,038 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:37:53,081 - __main__ - ERROR - Error in main execution: 'int' object has no attribute 'fillna'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 161, in run_backtest
    bt_data = MLDataLoader.prepare_backtrader_data(historical_data, prediction_data)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 133, in prepare_backtrader_data
    ticker_df['Buy_Signal'] = ticker_df.get('Buy_Signal', 0).fillna(0).astype(float)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'fillna'
2025-04-13 15:39:38,553 - root - INFO - Created directory: models
2025-04-13 15:39:38,553 - root - INFO - Created directory: data
2025-04-13 15:39:38,553 - root - INFO - Created directory: logs
2025-04-13 15:39:38,553 - root - INFO - Created directory: results
2025-04-13 15:39:38,553 - root - INFO - Created directory: plots
2025-04-13 15:39:38,553 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:39:38,553 - __main__ - INFO - Fetching historical data...
2025-04-13 15:39:38,553 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:39:38,553 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-13 15:39:38,553 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:38,556 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:39:38,557 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:39:38,570 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:38,570 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:38,570 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:38,570 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:38,570 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:39:38,570 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:38,570 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:38,570 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:38,570 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:38,571 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:39:38,571 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:39:38,571 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:39:38,571 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:38,580 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:39:38,829 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:39:38,829 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:39:38,829 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:38,829 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:38,830 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:39:39,159 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:39:39,341 - yfinance - DEBUG - response code=200
2025-04-13 15:39:39,342 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:39,342 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:39,355 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:39,360 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:39,371 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:39,374 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:39,374 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:39,374 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:39,374 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:39:39,374 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:39,374 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:39:39,374 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:39,374 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:39,374 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:39,374 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:39,374 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:39:39,374 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:39,374 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:39,374 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:39,374 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:39,374 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:39,374 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:39,374 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:39,374 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:39,605 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:39:39,700 - yfinance - DEBUG - response code=200
2025-04-13 15:39:39,700 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:39,701 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:39,710 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:39,711 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:39,716 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:39,718 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:39,718 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:39,718 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:39,718 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:39:39,719 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:39,719 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:39:39,719 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:39,719 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:39,719 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:39,719 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:39,719 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:39:39,719 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:39,719 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:39,719 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:39,719 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:39,719 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:39,719 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:39,719 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:39,719 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:39,925 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:39:39,950 - yfinance - DEBUG - response code=200
2025-04-13 15:39:39,951 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:39,951 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:39,956 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:39,957 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:39,962 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:39,965 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:39,965 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:39,965 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:39,965 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:39:39,965 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:39,965 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:39:39,965 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:39,965 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:39,965 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:39,965 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:39,965 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:39:39,965 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:39,965 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:39,965 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:39,965 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:39,965 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:39,965 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:39,965 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:39,965 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:40,153 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:39:40,169 - yfinance - DEBUG - response code=200
2025-04-13 15:39:40,170 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:40,170 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:40,178 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:40,179 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:40,184 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:40,186 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:40,186 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:40,186 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:40,186 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:39:40,186 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:40,186 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:39:40,186 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:40,186 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:40,186 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:40,186 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:40,186 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:39:40,186 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:40,186 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:40,186 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:40,186 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:40,186 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:40,186 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:40,186 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:40,186 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:40,375 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:39:40,391 - yfinance - DEBUG - response code=200
2025-04-13 15:39:40,392 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:40,392 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:40,397 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:40,398 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:40,403 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:40,405 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:40,405 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:40,405 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:40,405 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:39:40,405 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:40,405 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:39:40,406 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:40,406 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:40,406 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:40,406 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:40,406 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:39:40,406 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:40,406 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:40,406 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:40,406 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:40,406 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:40,406 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:40,406 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:40,406 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:40,561 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:39:40,612 - yfinance - DEBUG - response code=200
2025-04-13 15:39:40,612 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:40,613 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:40,616 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:40,617 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:40,618 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:40,620 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:40,620 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:40,620 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:40,620 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:39:40,621 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:39:40,621 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:39:40,621 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:39:40,685 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:39:40,693 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:39:40,697 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:39:40,702 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:39:40,704 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:39:40,709 - model_training - INFO - Original class distribution: [8521 2741]
2025-04-13 15:39:40,753 - model_training - INFO - Class distribution after SMOTE: [8521 8521]
2025-04-13 15:39:40,753 - __main__ - INFO - Training model...
2025-04-13 15:39:40,753 - model_training - INFO - Training Random Forest model...
2025-04-13 15:39:52,698 - __main__ - INFO - Evaluating model...
2025-04-13 15:39:52,698 - model_training - INFO - Evaluating model performance...
2025-04-13 15:39:52,817 - model_training - INFO - Model Accuracy: 0.5863
2025-04-13 15:39:52,817 - model_training - INFO - F1 Score: 0.3449
2025-04-13 15:39:52,817 - model_training - INFO - ROC AUC: 0.5938
2025-04-13 15:39:52,817 - __main__ - INFO - Saving model...
2025-04-13 15:39:52,856 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:39:52,856 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:39:52,856 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:39:52,856 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:52,857 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:39:52,857 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:52,857 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:39:52+10:00', 'period2': '2025-04-13 15:39:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:52,857 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:52,857 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:52,857 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:39:52,857 - yfinance - DEBUG - params={'period1': 1744090792, 'period2': 1744522792, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:52,857 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:52,857 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:52,857 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:52,857 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:52,857 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:52,857 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:52,857 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:53,051 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090792&period2=1744522792&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:39:53,051 - yfinance - DEBUG - response code=200
2025-04-13 15:39:53,051 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:53,051 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:53,053 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:53,054 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:53,059 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,062 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,062 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:53,062 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:53,062 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:53,062 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:39:53,062 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:53,063 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:39:52+10:00', 'period2': '2025-04-13 15:39:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,063 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:53,063 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:53,063 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:39:53,063 - yfinance - DEBUG - params={'period1': 1744090792, 'period2': 1744522792, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,063 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:53,063 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:53,063 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,063 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:53,063 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:53,063 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,063 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:53,271 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090792&period2=1744522792&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:39:53,272 - yfinance - DEBUG - response code=200
2025-04-13 15:39:53,273 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:53,273 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:53,278 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:53,278 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:53,280 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,282 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,282 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:53,282 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:53,282 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:53,282 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:39:53,282 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:53,282 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:39:52+10:00', 'period2': '2025-04-13 15:39:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,282 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:53,282 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:53,282 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:39:53,282 - yfinance - DEBUG - params={'period1': 1744090792, 'period2': 1744522792, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,283 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:53,283 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:53,283 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,283 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:53,283 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:53,283 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,283 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:53,470 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090792&period2=1744522792&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:39:53,471 - yfinance - DEBUG - response code=200
2025-04-13 15:39:53,471 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:53,471 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:53,473 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:53,474 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:53,476 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,478 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,478 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:53,478 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:53,478 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:53,478 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:39:53,479 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:53,479 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:39:52+10:00', 'period2': '2025-04-13 15:39:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,479 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:53,479 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:53,479 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:39:53,479 - yfinance - DEBUG - params={'period1': 1744090792, 'period2': 1744522792, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,479 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:53,479 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:53,479 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,479 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:53,479 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:53,479 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,479 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:53,811 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090792&period2=1744522792&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:39:53,811 - yfinance - DEBUG - response code=200
2025-04-13 15:39:53,811 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:53,811 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:53,812 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:53,812 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:53,813 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,815 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:53,815 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:53,815 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:53,815 - yfinance - DEBUG - Entering history()
2025-04-13 15:39:53,815 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:39:53,816 - yfinance - DEBUG -  Entering history()
2025-04-13 15:39:53,816 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:39:52+10:00', 'period2': '2025-04-13 15:39:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,816 - yfinance - DEBUG -   Entering get()
2025-04-13 15:39:53,816 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:39:53,816 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:39:53,816 - yfinance - DEBUG - params={'period1': 1744090792, 'period2': 1744522792, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:39:53,816 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:39:53,816 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:39:53,816 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,816 - yfinance - DEBUG - reusing cookie
2025-04-13 15:39:53,816 - yfinance - DEBUG - reusing crumb
2025-04-13 15:39:53,816 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:39:53,816 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:39:54,012 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090792&period2=1744522792&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:39:54,012 - yfinance - DEBUG - response code=200
2025-04-13 15:39:54,012 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:39:54,012 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:39:54,013 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:39:54,013 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:39:54,014 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:54,016 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:39:54,016 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:39:54,016 - yfinance - DEBUG - Exiting history()
2025-04-13 15:39:54,016 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:39:54,023 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:39:54,077 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:39:54,086 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:39:54,088 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'WBC.AX', 'NAB.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5959276808374055, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5038132590892728, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.4533505537082209, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.44876327312320813, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4387065332022981, 'Recommendation': 'Hold'}]}
2025-04-13 15:39:54,088 - __main__ - INFO - Running backtest...
2025-04-13 15:39:54,088 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:39:54,117 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 183, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<5 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-13 15:40:39,165 - root - INFO - Created directory: models
2025-04-13 15:40:39,165 - root - INFO - Created directory: data
2025-04-13 15:40:39,165 - root - INFO - Created directory: logs
2025-04-13 15:40:39,165 - root - INFO - Created directory: results
2025-04-13 15:40:39,165 - root - INFO - Created directory: plots
2025-04-13 15:40:39,165 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:40:39,165 - __main__ - INFO - Fetching historical data...
2025-04-13 15:40:39,165 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:40:39,165 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-13 15:40:39,165 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:39,166 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:40:39,166 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:40:39,179 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:39,179 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:39,179 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:39,179 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:39,179 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:40:39,179 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:39,179 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:39,179 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:39,179 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:39,180 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:40:39,180 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:40:39,180 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:40:39,180 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:39,189 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:40:39,390 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:40:39,390 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:40:39,390 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:39,390 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:39,391 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:40:39,654 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:40:39,836 - yfinance - DEBUG - response code=200
2025-04-13 15:40:39,837 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:39,837 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:39,842 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:39,845 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:39,853 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:39,857 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:39,857 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:39,857 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:39,857 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:40:39,858 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:39,858 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:40:39,858 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:39,858 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:39,858 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:39,858 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:39,858 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:40:39,858 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:39,858 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:39,858 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:39,858 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:39,858 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:39,858 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:39,858 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:39,858 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:40,080 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:40:40,260 - yfinance - DEBUG - response code=200
2025-04-13 15:40:40,261 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:40,261 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:40,268 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:40,269 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:40,274 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:40,276 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:40,276 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:40,276 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:40,276 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:40:40,276 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:40,277 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:40:40,277 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:40,277 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:40,277 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:40,277 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:40,277 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:40:40,277 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:40,277 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:40,277 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:40,277 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:40,277 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:40,277 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:40,277 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:40,277 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:40,479 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:40:40,661 - yfinance - DEBUG - response code=200
2025-04-13 15:40:40,661 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:40,661 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:40,665 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:40,666 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:40,671 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:40,673 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:40,673 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:40,673 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:40,673 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:40:40,673 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:40,673 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:40:40,674 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:40,674 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:40,674 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:40,674 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:40,674 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:40:40,674 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:40,674 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:40,674 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:40,674 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:40,674 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:40,674 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:40,674 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:40,674 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:40,891 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:40:40,911 - yfinance - DEBUG - response code=200
2025-04-13 15:40:40,911 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:40,911 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:40,915 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:40,916 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:40,921 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:40,922 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:40,922 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:40,923 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:40,923 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:40:40,923 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:40,923 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:40:40,923 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:40,923 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:40,923 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:40,923 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:40,923 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:40:40,923 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:40,923 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:40,923 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:40,923 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:40,923 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:40,923 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:40,923 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:40,923 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:41,140 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:40:41,321 - yfinance - DEBUG - response code=200
2025-04-13 15:40:41,322 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:41,322 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:41,329 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:41,330 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:41,335 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:41,336 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:41,336 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:41,336 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:41,337 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:40:41,337 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:41,337 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:40:41,337 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:41,337 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:41,337 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:41,337 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:41,337 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:40:41,337 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:41,337 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:41,337 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:41,337 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:41,337 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:41,337 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:41,337 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:41,337 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:41,489 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:40:41,669 - yfinance - DEBUG - response code=200
2025-04-13 15:40:41,669 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:41,669 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:41,678 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:41,679 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:41,681 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:41,683 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:41,684 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:41,684 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:41,684 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:40:41,685 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:40:41,685 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:40:41,685 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:40:41,751 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:40:41,760 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:40:41,764 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:40:41,769 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:40:41,772 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:40:41,776 - model_training - INFO - Original class distribution: [8521 2741]
2025-04-13 15:40:41,814 - model_training - INFO - Class distribution after SMOTE: [8521 8521]
2025-04-13 15:40:41,814 - __main__ - INFO - Training model...
2025-04-13 15:40:41,814 - model_training - INFO - Training Random Forest model...
2025-04-13 15:40:53,922 - __main__ - INFO - Evaluating model...
2025-04-13 15:40:53,923 - model_training - INFO - Evaluating model performance...
2025-04-13 15:40:54,039 - model_training - INFO - Model Accuracy: 0.5876
2025-04-13 15:40:54,039 - model_training - INFO - F1 Score: 0.3470
2025-04-13 15:40:54,039 - model_training - INFO - ROC AUC: 0.5924
2025-04-13 15:40:54,039 - __main__ - INFO - Saving model...
2025-04-13 15:40:54,074 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:40:54,074 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:40:54,074 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:40:54,075 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:54,075 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:40:54,075 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:54,075 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:40:54+10:00', 'period2': '2025-04-13 15:40:54+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,075 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:54,075 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:54,075 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:40:54,075 - yfinance - DEBUG - params={'period1': 1744090854, 'period2': 1744522854, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,075 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:54,075 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:54,075 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,075 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:54,075 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:54,075 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,075 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:54,260 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090854&period2=1744522854&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:40:54,260 - yfinance - DEBUG - response code=200
2025-04-13 15:40:54,260 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:54,260 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:54,261 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:54,261 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:54,263 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,265 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,265 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:54,265 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:54,265 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:54,265 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:40:54,266 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:54,266 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:40:54+10:00', 'period2': '2025-04-13 15:40:54+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,266 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:54,266 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:54,266 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:40:54,266 - yfinance - DEBUG - params={'period1': 1744090854, 'period2': 1744522854, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,266 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:54,266 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:54,266 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,266 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:54,266 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:54,266 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,266 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:54,436 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090854&period2=1744522854&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:40:54,438 - yfinance - DEBUG - response code=200
2025-04-13 15:40:54,438 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:54,438 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:54,441 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:54,442 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:54,444 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,446 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,446 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:54,446 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:54,446 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:54,446 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:40:54,446 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:54,446 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:40:54+10:00', 'period2': '2025-04-13 15:40:54+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,446 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:54,446 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:54,446 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:40:54,446 - yfinance - DEBUG - params={'period1': 1744090854, 'period2': 1744522854, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,446 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:54,446 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:54,446 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,446 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:54,447 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:54,447 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,447 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:54,611 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090854&period2=1744522854&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:40:54,612 - yfinance - DEBUG - response code=200
2025-04-13 15:40:54,612 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:54,612 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:54,612 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:54,613 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:54,614 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,617 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,617 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:54,617 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:54,617 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:54,617 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:40:54,617 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:54,618 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:40:54+10:00', 'period2': '2025-04-13 15:40:54+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,618 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:54,618 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:54,618 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:40:54,618 - yfinance - DEBUG - params={'period1': 1744090854, 'period2': 1744522854, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,618 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:54,618 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:54,618 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,618 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:54,618 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:54,618 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,618 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:54,789 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090854&period2=1744522854&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:40:54,790 - yfinance - DEBUG - response code=200
2025-04-13 15:40:54,790 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:54,791 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:54,794 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:54,795 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:54,798 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,800 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,800 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:54,800 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:54,801 - yfinance - DEBUG - Entering history()
2025-04-13 15:40:54,801 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:40:54,801 - yfinance - DEBUG -  Entering history()
2025-04-13 15:40:54,801 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:40:54+10:00', 'period2': '2025-04-13 15:40:54+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,801 - yfinance - DEBUG -   Entering get()
2025-04-13 15:40:54,801 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:40:54,801 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:40:54,801 - yfinance - DEBUG - params={'period1': 1744090854, 'period2': 1744522854, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:40:54,801 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:40:54,801 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:40:54,801 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,801 - yfinance - DEBUG - reusing cookie
2025-04-13 15:40:54,801 - yfinance - DEBUG - reusing crumb
2025-04-13 15:40:54,801 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:40:54,801 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:40:54,995 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090854&period2=1744522854&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:40:54,995 - yfinance - DEBUG - response code=200
2025-04-13 15:40:54,995 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:40:54,995 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:40:54,995 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:40:54,996 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:40:54,997 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,998 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:40:54,998 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:40:54,998 - yfinance - DEBUG - Exiting history()
2025-04-13 15:40:54,999 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:40:55,005 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:40:55,048 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:40:55,055 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:40:55,057 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'CSL.AX', 'NAB.AX', 'WBC.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5899457226551968, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5718249844142872, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4835193850773476, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.4635552145972053, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.46219560156713646, 'Recommendation': 'Hold'}]}
2025-04-13 15:40:55,057 - __main__ - INFO - Running walk-forward test...
2025-04-13 15:40:55,057 - backtest_engine - INFO - Performing walk-forward test with 3 steps
2025-04-13 15:40:55,065 - backtest_engine - INFO - Step 1: Train until 2017-04-03 00:00:00+10:00, Test from 2017-04-04 00:00:00+10:00 to 2017-07-05 00:00:00+10:00
2025-04-13 15:40:55,069 - model_training - INFO - Original class distribution: [1822  688]
2025-04-13 15:40:55,072 - model_training - INFO - Class distribution after SMOTE: [1822 1822]
2025-04-13 15:40:55,072 - model_training - INFO - Training Random Forest model...
2025-04-13 15:40:57,092 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:40:57,101 - __main__ - ERROR - Error in main execution: strptime() argument 1 must be str, not Timestamp
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 114, in main
    wf_results = walk_forward_test(
        historical_data,
    ...<4 lines>...
        steps=3
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 335, in walk_forward_test
    backtest_results = run_backtest(
        test_data,
    ...<2 lines>...
        end_date=test_end_date
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 177, in run_backtest
    from_date = datetime.datetime.strptime(start_date, '%Y-%m-%d')
TypeError: strptime() argument 1 must be str, not Timestamp
2025-04-13 15:41:02,030 - root - INFO - Created directory: models
2025-04-13 15:41:02,031 - root - INFO - Created directory: data
2025-04-13 15:41:02,031 - root - INFO - Created directory: logs
2025-04-13 15:41:02,031 - root - INFO - Created directory: results
2025-04-13 15:41:02,031 - root - INFO - Created directory: plots
2025-04-13 15:41:02,031 - __main__ - INFO - Starting stock prediction system
2025-04-13 15:41:02,031 - __main__ - INFO - Fetching historical data...
2025-04-13 15:41:02,031 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-13 15:41:02,031 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.3 Safari/605.1.15
2025-04-13 15:41:02,031 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:02,032 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-13 15:41:02,032 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:41:02,046 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:02,046 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:02,046 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:02,046 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:02,046 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:41:02,046 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:02,046 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:02,046 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:02,046 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:02,047 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-13 15:41:02,047 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-13 15:41:02,047 - yfinance - DEBUG - loaded persistent cookie
2025-04-13 15:41:02,047 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:02,054 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-13 15:41:02,275 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-13 15:41:02,276 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-13 15:41:02,276 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:02,276 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:02,277 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-13 15:41:02,566 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:41:02,745 - yfinance - DEBUG - response code=200
2025-04-13 15:41:02,745 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:02,745 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:02,751 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:02,752 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:02,760 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:02,763 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:02,763 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:02,763 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:02,763 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-13 15:41:02,763 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:02,763 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:41:02,763 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:02,764 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:02,764 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:02,764 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:02,764 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:41:02,764 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:02,764 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:02,764 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:02,764 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:02,764 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:02,764 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:02,764 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:02,764 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:02,973 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:41:03,233 - yfinance - DEBUG - response code=200
2025-04-13 15:41:03,233 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:03,233 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:03,240 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:03,241 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:03,246 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:03,249 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:03,249 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:03,249 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:03,250 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-13 15:41:03,250 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:03,250 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:41:03,250 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:03,250 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:03,250 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:03,250 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:03,250 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:41:03,250 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:03,250 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:03,250 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:03,250 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:03,250 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:03,250 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:03,250 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:03,250 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:03,456 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:41:03,474 - yfinance - DEBUG - response code=200
2025-04-13 15:41:03,474 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:03,474 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:03,479 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:03,480 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:03,485 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:03,487 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:03,487 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:03,487 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:03,488 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-13 15:41:03,488 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:03,488 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:41:03,488 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:03,488 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:03,488 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:03,488 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:03,488 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:41:03,488 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:03,488 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:03,488 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:03,488 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:03,488 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:03,488 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:03,488 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:03,488 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:03,716 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:41:03,895 - yfinance - DEBUG - response code=200
2025-04-13 15:41:03,895 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:03,895 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:03,900 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:03,901 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:03,905 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:03,908 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:03,908 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:03,908 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:03,908 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-13 15:41:03,908 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:03,909 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:41:03,909 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:03,909 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:03,909 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:03,909 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:03,909 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:41:03,909 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:03,909 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:03,909 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:03,909 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:03,909 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:03,909 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:03,909 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:03,909 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:04,118 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:41:04,139 - yfinance - DEBUG - response code=200
2025-04-13 15:41:04,139 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:04,139 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:04,144 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:04,144 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:04,149 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:04,151 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:04,151 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:04,151 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:04,151 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-13 15:41:04,151 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:04,151 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-13 15:41:04,151 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:04,151 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:04,151 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:04,151 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:04,151 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-13 15:41:04,151 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:04,151 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:04,151 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:04,151 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:04,151 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:04,151 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:04,151 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:04,151 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:04,300 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-13 15:41:04,480 - yfinance - DEBUG - response code=200
2025-04-13 15:41:04,481 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:04,481 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:04,484 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-13 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:04,485 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-13 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:04,486 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:04,488 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-13 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:04,488 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:04,488 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:04,488 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-13 15:41:04,489 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-13 15:41:04,489 - __main__ - INFO - Performing feature engineering...
2025-04-13 15:41:04,489 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:41:04,552 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-13 15:41:04,560 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:41:04,564 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-13 15:41:04,569 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:41:04,571 - feature_engineering - INFO - Using 31 features for model training
2025-04-13 15:41:04,576 - model_training - INFO - Original class distribution: [8522 2740]
2025-04-13 15:41:04,611 - model_training - INFO - Class distribution after SMOTE: [8522 8522]
2025-04-13 15:41:04,611 - __main__ - INFO - Training model...
2025-04-13 15:41:04,611 - model_training - INFO - Training Random Forest model...
2025-04-13 15:41:17,006 - __main__ - INFO - Evaluating model...
2025-04-13 15:41:17,006 - model_training - INFO - Evaluating model performance...
2025-04-13 15:41:17,124 - model_training - INFO - Model Accuracy: 0.5863
2025-04-13 15:41:17,124 - model_training - INFO - F1 Score: 0.3577
2025-04-13 15:41:17,124 - model_training - INFO - ROC AUC: 0.5930
2025-04-13 15:41:17,124 - __main__ - INFO - Saving model...
2025-04-13 15:41:17,157 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-13 15:41:17,157 - __main__ - INFO - Generating signals for latest market data...
2025-04-13 15:41:17,157 - data_fetcher - INFO - Fetching latest market data from 2025-04-08 to 2025-04-13
2025-04-13 15:41:17,158 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:17,158 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-13 15:41:17,158 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:17,158 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:41:17+10:00', 'period2': '2025-04-13 15:41:17+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,158 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:17,158 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:17,158 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-13 15:41:17,158 - yfinance - DEBUG - params={'period1': 1744090877, 'period2': 1744522877, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,158 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:17,158 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:17,158 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,158 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:17,158 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:17,158 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,158 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:17,335 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744090877&period2=1744522877&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1530
2025-04-13 15:41:17,335 - yfinance - DEBUG - response code=200
2025-04-13 15:41:17,335 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:17,335 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:17,336 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:17,337 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:17,339 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,341 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,341 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:17,341 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:17,341 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:17,341 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-13 15:41:17,342 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:17,342 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:41:17+10:00', 'period2': '2025-04-13 15:41:17+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,342 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:17,342 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:17,342 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-13 15:41:17,342 - yfinance - DEBUG - params={'period1': 1744090877, 'period2': 1744522877, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,342 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:17,342 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:17,342 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,342 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:17,342 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:17,342 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,342 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:17,515 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744090877&period2=1744522877&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1476
2025-04-13 15:41:17,515 - yfinance - DEBUG - response code=200
2025-04-13 15:41:17,515 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:17,516 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:17,517 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:17,519 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:17,520 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,522 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,522 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:17,522 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:17,523 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:17,523 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-13 15:41:17,523 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:17,523 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:41:17+10:00', 'period2': '2025-04-13 15:41:17+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,523 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:17,523 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:17,523 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-13 15:41:17,523 - yfinance - DEBUG - params={'period1': 1744090877, 'period2': 1744522877, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,523 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:17,523 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:17,523 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,523 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:17,523 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:17,523 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,523 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:17,706 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744090877&period2=1744522877&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1499
2025-04-13 15:41:17,707 - yfinance - DEBUG - response code=200
2025-04-13 15:41:17,707 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:17,707 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:17,708 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:17,709 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:17,710 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,712 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,712 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:17,712 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:17,713 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:17,713 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-13 15:41:17,713 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:17,713 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:41:17+10:00', 'period2': '2025-04-13 15:41:17+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,713 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:17,713 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:17,713 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-13 15:41:17,713 - yfinance - DEBUG - params={'period1': 1744090877, 'period2': 1744522877, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,713 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:17,713 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:17,713 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,714 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:17,714 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:17,714 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,714 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:17,927 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744090877&period2=1744522877&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1506
2025-04-13 15:41:17,928 - yfinance - DEBUG - response code=200
2025-04-13 15:41:17,928 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:17,930 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:17,932 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:17,933 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:17,936 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,939 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:17,939 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:17,939 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:17,939 - yfinance - DEBUG - Entering history()
2025-04-13 15:41:17,940 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-13 15:41:17,940 - yfinance - DEBUG -  Entering history()
2025-04-13 15:41:17,940 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-08 15:41:17+10:00', 'period2': '2025-04-13 15:41:17+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,940 - yfinance - DEBUG -   Entering get()
2025-04-13 15:41:17,940 - yfinance - DEBUG -    Entering _make_request()
2025-04-13 15:41:17,940 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-13 15:41:17,940 - yfinance - DEBUG - params={'period1': 1744090877, 'period2': 1744522877, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-13 15:41:17,940 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-13 15:41:17,940 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-13 15:41:17,940 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,940 - yfinance - DEBUG - reusing cookie
2025-04-13 15:41:17,940 - yfinance - DEBUG - reusing crumb
2025-04-13 15:41:17,940 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-13 15:41:17,940 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-13 15:41:18,128 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744090877&period2=1744522877&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1502
2025-04-13 15:41:18,129 - yfinance - DEBUG - response code=200
2025-04-13 15:41:18,129 - yfinance - DEBUG -    Exiting _make_request()
2025-04-13 15:41:18,129 - yfinance - DEBUG -   Exiting get()
2025-04-13 15:41:18,130 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-08 00:00:00 -> 2025-04-11 00:00:00
2025-04-13 15:41:18,131 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-08 10:00:00+10:00 -> 2025-04-11 10:00:00+10:00
2025-04-13 15:41:18,133 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:18,136 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-08 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-13 15:41:18,136 - yfinance - DEBUG -  Exiting history()
2025-04-13 15:41:18,136 - yfinance - DEBUG - Exiting history()
2025-04-13 15:41:18,137 - feature_engineering - INFO - Adding technical indicators...
2025-04-13 15:41:18,144 - signal_generator - INFO - Technical indicators added to latest data
2025-04-13 15:41:18,187 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-13 15:41:18,194 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-13 15:41:18,195 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'NAB.AX', 'BHP.AX', 'CSL.AX', 'WBC.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5337948698661352, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5311985933018666, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5237204106803142, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.518143216817499, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.48141872712859035, 'Recommendation': 'Hold'}]}
2025-04-13 15:41:18,195 - __main__ - INFO - Running walk-forward test...
2025-04-13 15:41:18,195 - backtest_engine - INFO - Performing walk-forward test with 3 steps
2025-04-13 15:41:18,202 - backtest_engine - INFO - Step 1: Train until 2017-04-03 00:00:00+10:00, Test from 2017-04-04 00:00:00+10:00 to 2017-07-05 00:00:00+10:00
2025-04-13 15:41:18,205 - model_training - INFO - Original class distribution: [1823  687]
2025-04-13 15:41:18,210 - model_training - INFO - Class distribution after SMOTE: [1823 1823]
2025-04-13 15:41:18,210 - model_training - INFO - Training Random Forest model...
2025-04-13 15:41:20,186 - backtest_engine - INFO - Setting up backtest...
2025-04-13 15:41:20,196 - __main__ - ERROR - Error in main execution: strptime() argument 1 must be str, not Timestamp
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 114, in main
    wf_results = walk_forward_test(
        historical_data,
    ...<4 lines>...
        steps=3
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 335, in walk_forward_test
    backtest_results = run_backtest(
        test_data,
    ...<2 lines>...
        end_date=test_end_date
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 177, in run_backtest
    from_date = datetime.datetime.strptime(start_date, '%Y-%m-%d')
TypeError: strptime() argument 1 must be str, not Timestamp
2025-04-14 10:03:00,944 - root - INFO - Created directory: models
2025-04-14 10:03:00,945 - root - INFO - Created directory: data
2025-04-14 10:03:00,945 - root - INFO - Created directory: logs
2025-04-14 10:03:00,945 - root - INFO - Created directory: results
2025-04-14 10:03:00,945 - root - INFO - Created directory: plots
2025-04-14 10:03:00,945 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:03:00,945 - __main__ - INFO - Fetching historical data...
2025-04-14 10:03:00,945 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:03:00,945 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14.7; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-14 10:03:00,945 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:00,948 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:03:00,948 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:03:00,972 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:00,972 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:00,972 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:00,972 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:00,972 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:03:00,972 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:00,972 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:00,972 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:00,972 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:00,973 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:03:00,973 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:03:00,973 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:03:00,974 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:00,981 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:03:01,213 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:03:01,213 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:03:01,213 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:01,213 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:01,214 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:03:01,595 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:03:01,661 - yfinance - DEBUG - response code=200
2025-04-14 10:03:01,661 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:01,661 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:01,673 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:03:01,677 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:03:01,689 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:01,691 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:01,691 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:01,691 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:01,691 - data_fetcher - INFO - Fetched 2534 periods for CBA.AX
2025-04-14 10:03:01,692 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:01,692 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:03:01,692 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:01,692 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:01,692 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:01,692 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:01,692 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:03:01,692 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:01,692 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:01,692 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:01,692 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:01,692 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:01,692 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:01,692 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:01,692 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:01,907 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:03:02,168 - yfinance - DEBUG - response code=200
2025-04-14 10:03:02,168 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:02,168 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:02,174 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:03:02,175 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:03:02,181 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:02,183 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:02,183 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:02,183 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:02,183 - data_fetcher - INFO - Fetched 2534 periods for BHP.AX
2025-04-14 10:03:02,183 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:02,183 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:03:02,184 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:02,184 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:02,184 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:02,184 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:02,184 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:03:02,184 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:02,184 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:02,184 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:02,184 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:02,184 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:02,184 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:02,184 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:02,184 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:02,390 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:03:02,421 - yfinance - DEBUG - response code=200
2025-04-14 10:03:02,422 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:02,422 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:02,428 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:03:02,429 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:03:02,434 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:02,436 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:02,437 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:02,437 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:02,437 - data_fetcher - INFO - Fetched 2534 periods for CSL.AX
2025-04-14 10:03:02,437 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:02,437 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:03:02,437 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:02,437 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:02,437 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:02,437 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:02,437 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:03:02,437 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:02,437 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:02,437 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:02,437 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:02,437 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:02,437 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:02,437 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:02,437 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:02,725 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:03:02,872 - yfinance - DEBUG - response code=200
2025-04-14 10:03:02,872 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:02,872 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:02,878 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:03:02,879 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:03:02,886 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:02,887 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:02,887 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:02,888 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:02,888 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:03:02,888 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:02,888 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:03:02,888 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:02,888 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:02,888 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:02,888 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:02,888 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:03:02,888 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:02,888 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:02,888 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:02,888 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:02,888 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:02,888 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:02,888 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:02,888 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:03,089 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:03:03,115 - yfinance - DEBUG - response code=200
2025-04-14 10:03:03,115 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:03,115 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:03,121 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:03:03,122 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:03:03,127 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:03,128 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:03,129 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:03,129 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:03,129 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:03:03,129 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:03,129 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:03:03,129 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:03,129 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:03,129 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:03,129 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:03,129 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:03:03,129 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:03,129 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:03,129 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:03,129 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:03,129 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:03,129 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:03,129 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:03,129 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:03,280 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:03:03,298 - yfinance - DEBUG - response code=200
2025-04-14 10:03:03,298 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:03,298 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:03,303 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:54:45
2025-04-14 10:03:03,304 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:54:45+10:00
2025-04-14 10:03:03,306 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:03,308 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:03,308 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:03,308 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:03,308 - data_fetcher - INFO - Fetched 2531 periods for ^AXJO
2025-04-14 10:03:03,309 - data_fetcher - INFO - Combined dataset shape: (15201, 9)
2025-04-14 10:03:03,309 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:03:03,309 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:03:03,373 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:03:03,382 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:03:03,387 - model_training - INFO - Train set: 12160 samples, Test set: 3041 samples
2025-04-14 10:03:03,393 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:03:03,396 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:03:03,402 - model_training - INFO - Original class distribution: [8518 2740]
2025-04-14 10:03:03,447 - model_training - INFO - Class distribution after SMOTE: [8518 8518]
2025-04-14 10:03:03,447 - __main__ - INFO - Training model...
2025-04-14 10:03:03,447 - model_training - INFO - Training Random Forest model...
2025-04-14 10:03:15,603 - __main__ - INFO - Evaluating model...
2025-04-14 10:03:15,604 - model_training - INFO - Evaluating model performance...
2025-04-14 10:03:15,722 - model_training - INFO - Model Accuracy: 0.5978
2025-04-14 10:03:15,722 - model_training - INFO - F1 Score: 0.3486
2025-04-14 10:03:15,722 - model_training - INFO - ROC AUC: 0.5930
2025-04-14 10:03:15,722 - __main__ - INFO - Saving model...
2025-04-14 10:03:15,761 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:03:15,761 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:03:15,761 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:03:15,761 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:15,761 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:03:15,762 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:15,762 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:03:15+10:00', 'period2': '2025-04-14 10:03:15+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:15,762 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:15,762 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:15,762 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:03:15,762 - yfinance - DEBUG - params={'period1': 1744156995, 'period2': 1744588995, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:15,762 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:15,762 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:15,762 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:15,762 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:15,762 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:15,762 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:15,763 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:15,951 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744156995&period2=1744588995&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1419
2025-04-14 10:03:15,951 - yfinance - DEBUG - response code=200
2025-04-14 10:03:15,951 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:15,951 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:15,952 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:03:15,953 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:03:15,956 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:15,958 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:15,958 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:15,958 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:15,958 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:15,959 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:03:15,959 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:15,959 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:03:15+10:00', 'period2': '2025-04-14 10:03:15+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:15,959 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:15,959 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:15,959 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:03:15,959 - yfinance - DEBUG - params={'period1': 1744156995, 'period2': 1744588995, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:15,959 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:15,959 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:15,959 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:15,959 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:15,959 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:15,959 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:15,959 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:16,165 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744156995&period2=1744588995&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1377
2025-04-14 10:03:16,166 - yfinance - DEBUG - response code=200
2025-04-14 10:03:16,166 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:16,167 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:16,168 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:03:16,169 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:03:16,171 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,172 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,172 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:16,172 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:16,172 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:16,173 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:03:16,173 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:16,173 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:03:15+10:00', 'period2': '2025-04-14 10:03:15+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:16,173 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:16,173 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:16,173 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:03:16,173 - yfinance - DEBUG - params={'period1': 1744156995, 'period2': 1744588995, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:16,173 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:16,173 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:16,173 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:16,173 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:16,173 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:16,173 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:16,173 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:16,533 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744156995&period2=1744588995&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1401
2025-04-14 10:03:16,534 - yfinance - DEBUG - response code=200
2025-04-14 10:03:16,534 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:16,534 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:16,535 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:03:16,536 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:03:16,537 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,538 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,538 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:16,538 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:16,539 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:16,539 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:03:16,539 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:16,539 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:03:15+10:00', 'period2': '2025-04-14 10:03:15+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:16,539 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:16,539 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:16,539 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:03:16,539 - yfinance - DEBUG - params={'period1': 1744156995, 'period2': 1744588995, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:16,539 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:16,539 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:16,539 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:16,539 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:16,539 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:16,539 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:16,539 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:16,745 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744156995&period2=1744588995&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:03:16,746 - yfinance - DEBUG - response code=200
2025-04-14 10:03:16,746 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:16,746 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:16,746 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:03:16,746 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:03:16,748 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,749 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,749 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:16,749 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:16,749 - yfinance - DEBUG - Entering history()
2025-04-14 10:03:16,750 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:03:16,750 - yfinance - DEBUG -  Entering history()
2025-04-14 10:03:16,750 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:03:15+10:00', 'period2': '2025-04-14 10:03:15+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:16,750 - yfinance - DEBUG -   Entering get()
2025-04-14 10:03:16,750 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:03:16,750 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:03:16,750 - yfinance - DEBUG - params={'period1': 1744156995, 'period2': 1744588995, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:03:16,750 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:03:16,750 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:03:16,750 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:03:16,750 - yfinance - DEBUG - reusing cookie
2025-04-14 10:03:16,750 - yfinance - DEBUG - reusing crumb
2025-04-14 10:03:16,750 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:03:16,750 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:03:16,951 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744156995&period2=1744588995&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:03:16,951 - yfinance - DEBUG - response code=200
2025-04-14 10:03:16,952 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:03:16,952 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:03:16,952 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:03:16,953 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:03:16,954 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,956 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:03:16,956 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:03:16,956 - yfinance - DEBUG - Exiting history()
2025-04-14 10:03:16,956 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:03:16,962 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:03:17,009 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:03:17,018 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:03:17,019 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'WBC.AX', 'NAB.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5671516481822791, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5167546727969163, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.50914865321368, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.4839000099379968, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.48297690741400123, 'Recommendation': 'Hold'}]}
2025-04-14 10:03:17,019 - __main__ - INFO - Running backtest...
2025-04-14 10:03:17,019 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:03:17,050 - __main__ - ERROR - Error in main execution: strptime() argument 1 must be str, not None
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 179, in run_backtest
    from_date = datetime.datetime.strptime(start_date, '%Y-%m-%d')
TypeError: strptime() argument 1 must be str, not None
2025-04-14 10:04:35,376 - root - INFO - Created directory: models
2025-04-14 10:04:35,376 - root - INFO - Created directory: data
2025-04-14 10:04:35,376 - root - INFO - Created directory: logs
2025-04-14 10:04:35,376 - root - INFO - Created directory: results
2025-04-14 10:04:35,376 - root - INFO - Created directory: plots
2025-04-14 10:04:35,376 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:04:35,376 - __main__ - INFO - Fetching historical data...
2025-04-14 10:04:35,376 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:04:35,376 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.3 Safari/605.1.15
2025-04-14 10:04:35,377 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:35,379 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:04:35,379 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:04:35,393 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:35,393 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:35,393 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:35,393 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:35,393 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:04:35,393 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:35,393 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:35,393 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:35,393 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:35,394 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:04:35,394 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:04:35,394 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:04:35,394 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:35,402 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:04:35,620 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:04:35,620 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:04:35,620 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:35,620 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:35,621 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:04:35,905 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:04:36,085 - yfinance - DEBUG - response code=200
2025-04-14 10:04:36,086 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:36,086 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:36,095 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:04:36,098 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:04:36,108 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:36,110 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:36,110 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:36,110 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:36,110 - data_fetcher - INFO - Fetched 2534 periods for CBA.AX
2025-04-14 10:04:36,110 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:36,110 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:04:36,111 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:36,111 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:36,111 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:36,111 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:36,111 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:04:36,111 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:36,111 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:36,111 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:36,111 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:36,111 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:36,111 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:36,111 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:36,111 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:36,525 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:04:36,773 - yfinance - DEBUG - response code=200
2025-04-14 10:04:36,774 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:36,774 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:36,782 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:04:36,783 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:04:36,787 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:36,789 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:36,789 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:36,789 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:36,789 - data_fetcher - INFO - Fetched 2534 periods for BHP.AX
2025-04-14 10:04:36,789 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:36,790 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:04:36,790 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:36,790 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:36,790 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:36,790 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:36,790 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:04:36,790 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:36,790 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:36,790 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:36,790 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:36,790 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:36,790 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:36,790 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:36,790 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:36,966 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:04:36,980 - yfinance - DEBUG - response code=200
2025-04-14 10:04:36,980 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:36,980 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:36,985 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:04:36,986 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:04:36,993 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:36,995 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:36,995 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:36,995 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:36,995 - data_fetcher - INFO - Fetched 2534 periods for CSL.AX
2025-04-14 10:04:36,995 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:36,996 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:04:36,996 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:36,996 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:36,996 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:36,996 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:36,996 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:04:36,996 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:36,996 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:36,996 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:36,996 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:36,996 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:36,996 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:36,996 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:36,996 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:37,188 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:04:37,206 - yfinance - DEBUG - response code=200
2025-04-14 10:04:37,206 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:37,206 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:37,212 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:04:37,213 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:04:37,222 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:37,225 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:37,225 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:37,225 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:37,225 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:04:37,226 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:37,226 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:04:37,226 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:37,226 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:37,226 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:37,226 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:37,226 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:04:37,226 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:37,226 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:37,226 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:37,226 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:37,226 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:37,226 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:37,226 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:37,226 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:37,438 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:04:37,616 - yfinance - DEBUG - response code=200
2025-04-14 10:04:37,617 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:37,617 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:37,624 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:04:37,625 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:04:37,630 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:37,631 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:37,631 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:37,631 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:37,632 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:04:37,632 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:37,632 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:04:37,632 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:37,632 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:37,632 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:37,632 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:37,632 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:04:37,632 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:37,632 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:37,632 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:37,632 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:37,632 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:37,632 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:37,632 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:37,632 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:37,773 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:04:37,950 - yfinance - DEBUG - response code=200
2025-04-14 10:04:37,951 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:37,951 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:37,957 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:54:45
2025-04-14 10:04:37,958 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:54:45+10:00
2025-04-14 10:04:37,959 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:37,961 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:37,961 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:37,961 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:37,961 - data_fetcher - INFO - Fetched 2531 periods for ^AXJO
2025-04-14 10:04:37,962 - data_fetcher - INFO - Combined dataset shape: (15201, 9)
2025-04-14 10:04:37,962 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:04:37,962 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:04:38,025 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:04:38,035 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:04:38,039 - model_training - INFO - Train set: 12160 samples, Test set: 3041 samples
2025-04-14 10:04:38,044 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:04:38,047 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:04:38,051 - model_training - INFO - Original class distribution: [8518 2740]
2025-04-14 10:04:38,093 - model_training - INFO - Class distribution after SMOTE: [8518 8518]
2025-04-14 10:04:38,093 - __main__ - INFO - Training model...
2025-04-14 10:04:38,093 - model_training - INFO - Training Random Forest model...
2025-04-14 10:04:50,211 - __main__ - INFO - Evaluating model...
2025-04-14 10:04:50,212 - model_training - INFO - Evaluating model performance...
2025-04-14 10:04:50,328 - model_training - INFO - Model Accuracy: 0.5971
2025-04-14 10:04:50,328 - model_training - INFO - F1 Score: 0.3475
2025-04-14 10:04:50,328 - model_training - INFO - ROC AUC: 0.5928
2025-04-14 10:04:50,328 - __main__ - INFO - Saving model...
2025-04-14 10:04:50,362 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:04:50,362 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:04:50,362 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:04:50,362 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:50,362 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:04:50,362 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:50,363 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:04:50+10:00', 'period2': '2025-04-14 10:04:50+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:50,363 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:50,363 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:50,363 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:04:50,363 - yfinance - DEBUG - params={'period1': 1744157090, 'period2': 1744589090, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:50,363 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:50,363 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:50,363 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:50,363 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:50,363 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:50,363 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:50,363 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:50,561 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744157090&period2=1744589090&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1419
2025-04-14 10:04:50,562 - yfinance - DEBUG - response code=200
2025-04-14 10:04:50,562 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:50,562 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:50,563 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:04:50,564 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:04:50,567 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:50,569 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:50,569 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:50,569 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:50,569 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:50,569 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:04:50,569 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:50,570 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:04:50+10:00', 'period2': '2025-04-14 10:04:50+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:50,570 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:50,570 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:50,570 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:04:50,570 - yfinance - DEBUG - params={'period1': 1744157090, 'period2': 1744589090, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:50,570 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:50,570 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:50,570 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:50,570 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:50,570 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:50,570 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:50,570 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:50,754 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744157090&period2=1744589090&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1377
2025-04-14 10:04:50,755 - yfinance - DEBUG - response code=200
2025-04-14 10:04:50,755 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:50,756 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:50,758 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:04:50,759 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:04:50,760 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:50,762 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:50,762 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:50,762 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:50,762 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:50,762 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:04:50,762 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:50,762 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:04:50+10:00', 'period2': '2025-04-14 10:04:50+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:50,763 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:50,763 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:50,763 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:04:50,763 - yfinance - DEBUG - params={'period1': 1744157090, 'period2': 1744589090, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:50,763 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:50,763 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:50,763 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:50,763 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:50,763 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:50,763 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:50,763 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:51,167 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744157090&period2=1744589090&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1401
2025-04-14 10:04:51,168 - yfinance - DEBUG - response code=200
2025-04-14 10:04:51,168 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:51,168 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:51,170 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:04:51,171 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:04:51,172 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:51,174 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:51,174 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:51,174 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:51,174 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:51,174 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:04:51,174 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:51,174 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:04:50+10:00', 'period2': '2025-04-14 10:04:50+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:51,174 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:51,174 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:51,174 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:04:51,174 - yfinance - DEBUG - params={'period1': 1744157090, 'period2': 1744589090, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:51,174 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:51,174 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:51,174 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:51,174 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:51,174 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:51,174 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:51,174 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:51,350 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744157090&period2=1744589090&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:04:51,350 - yfinance - DEBUG - response code=200
2025-04-14 10:04:51,350 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:51,350 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:51,351 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:04:51,351 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:04:51,352 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:51,354 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:51,354 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:51,354 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:51,354 - yfinance - DEBUG - Entering history()
2025-04-14 10:04:51,354 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:04:51,354 - yfinance - DEBUG -  Entering history()
2025-04-14 10:04:51,354 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:04:50+10:00', 'period2': '2025-04-14 10:04:50+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:51,354 - yfinance - DEBUG -   Entering get()
2025-04-14 10:04:51,354 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:04:51,354 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:04:51,354 - yfinance - DEBUG - params={'period1': 1744157090, 'period2': 1744589090, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:04:51,354 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:04:51,354 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:04:51,354 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:04:51,354 - yfinance - DEBUG - reusing cookie
2025-04-14 10:04:51,354 - yfinance - DEBUG - reusing crumb
2025-04-14 10:04:51,354 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:04:51,354 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:04:51,559 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744157090&period2=1744589090&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:04:51,559 - yfinance - DEBUG - response code=200
2025-04-14 10:04:51,559 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:04:51,559 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:04:51,560 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:04:51,560 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:04:51,561 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:51,563 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:04:51,563 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:04:51,563 - yfinance - DEBUG - Exiting history()
2025-04-14 10:04:51,563 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:04:51,569 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:04:51,620 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:04:51,629 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:04:51,631 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'BHP.AX', 'WBC.AX', 'NAB.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.563843649030076, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.5327398219791754, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.4958841970812028, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.4878219906547684, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.47898887941129525, 'Recommendation': 'Hold'}]}
2025-04-14 10:04:51,631 - __main__ - INFO - Running backtest...
2025-04-14 10:04:51,631 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:04:51,658 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 183, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<5 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-14 10:08:38,244 - root - INFO - Created directory: models
2025-04-14 10:08:38,244 - root - INFO - Created directory: data
2025-04-14 10:08:38,244 - root - INFO - Created directory: logs
2025-04-14 10:08:38,244 - root - INFO - Created directory: results
2025-04-14 10:08:38,244 - root - INFO - Created directory: plots
2025-04-14 10:08:38,244 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:08:38,244 - __main__ - INFO - Fetching historical data...
2025-04-14 10:08:38,244 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:08:38,244 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
2025-04-14 10:08:38,244 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:38,247 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:08:38,247 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:08:38,260 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:38,260 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:38,260 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:38,260 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:38,260 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:08:38,260 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:38,260 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:38,260 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:38,260 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:38,261 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:08:38,261 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:08:38,261 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:08:38,261 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:38,269 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:08:38,495 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:08:38,495 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:08:38,495 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:38,495 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:38,496 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:08:38,774 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:08:38,862 - yfinance - DEBUG - response code=200
2025-04-14 10:08:38,862 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:38,862 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:38,872 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:08:38,875 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:08:38,883 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:38,886 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:38,886 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:38,886 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:38,886 - data_fetcher - INFO - Fetched 2534 periods for CBA.AX
2025-04-14 10:08:38,886 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:38,886 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:08:38,886 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:38,886 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:38,886 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:38,886 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:38,886 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:08:38,886 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:38,886 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:38,886 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:38,887 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:38,887 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:38,887 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:38,887 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:38,887 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:39,114 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:08:39,209 - yfinance - DEBUG - response code=200
2025-04-14 10:08:39,209 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:39,209 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:39,217 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:08:39,217 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:08:39,222 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:39,224 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:39,224 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:39,224 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:39,224 - data_fetcher - INFO - Fetched 2534 periods for BHP.AX
2025-04-14 10:08:39,224 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:39,224 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:08:39,225 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:39,225 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:39,225 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:39,225 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:39,225 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:08:39,225 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:39,225 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:39,225 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:39,225 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:39,225 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:39,225 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:39,225 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:39,225 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:39,412 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:08:39,504 - yfinance - DEBUG - response code=200
2025-04-14 10:08:39,505 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:39,505 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:39,513 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:08:39,513 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:08:39,518 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:39,519 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:39,520 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:39,520 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:39,520 - data_fetcher - INFO - Fetched 2534 periods for CSL.AX
2025-04-14 10:08:39,520 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:39,520 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:08:39,520 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:39,520 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:39,520 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:39,520 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:39,520 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:08:39,520 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:39,520 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:39,520 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:39,520 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:39,520 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:39,520 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:39,520 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:39,520 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:39,712 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:08:39,729 - yfinance - DEBUG - response code=200
2025-04-14 10:08:39,729 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:39,729 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:39,736 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:08:39,737 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:08:39,744 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:39,748 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:39,748 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:39,748 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:39,748 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:08:39,749 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:39,749 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:08:39,749 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:39,749 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:39,749 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:39,749 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:39,749 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:08:39,749 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:39,749 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:39,749 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:39,749 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:39,749 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:39,749 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:39,749 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:39,749 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:39,961 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:08:40,053 - yfinance - DEBUG - response code=200
2025-04-14 10:08:40,054 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:40,054 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:40,061 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:08:40,061 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:08:40,066 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:40,068 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:40,068 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:40,068 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:40,068 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:08:40,068 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:40,068 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:08:40,068 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:40,068 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:40,068 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:40,068 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:40,069 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:08:40,069 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:40,069 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:40,069 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:40,069 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:40,069 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:40,069 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:40,069 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:40,069 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:40,212 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:08:40,229 - yfinance - DEBUG - response code=200
2025-04-14 10:08:40,229 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:40,229 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:40,238 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:54:45
2025-04-14 10:08:40,239 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:54:45+10:00
2025-04-14 10:08:40,241 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:40,242 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:40,243 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:40,243 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:40,243 - data_fetcher - INFO - Fetched 2531 periods for ^AXJO
2025-04-14 10:08:40,243 - data_fetcher - INFO - Combined dataset shape: (15201, 9)
2025-04-14 10:08:40,243 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:08:40,244 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:08:40,306 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:08:40,314 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:08:40,317 - model_training - INFO - Train set: 12160 samples, Test set: 3041 samples
2025-04-14 10:08:40,322 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:08:40,325 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:08:40,329 - model_training - INFO - Original class distribution: [8518 2740]
2025-04-14 10:08:40,370 - model_training - INFO - Class distribution after SMOTE: [8518 8518]
2025-04-14 10:08:40,371 - __main__ - INFO - Training model...
2025-04-14 10:08:40,371 - model_training - INFO - Training Random Forest model...
2025-04-14 10:08:52,386 - __main__ - INFO - Evaluating model...
2025-04-14 10:08:52,387 - model_training - INFO - Evaluating model performance...
2025-04-14 10:08:52,503 - model_training - INFO - Model Accuracy: 0.5878
2025-04-14 10:08:52,503 - model_training - INFO - F1 Score: 0.3395
2025-04-14 10:08:52,503 - model_training - INFO - ROC AUC: 0.5902
2025-04-14 10:08:52,503 - __main__ - INFO - Saving model...
2025-04-14 10:08:52,536 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:08:52,536 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:08:52,536 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:08:52,536 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:52,537 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:08:52,537 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:52,537 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:08:52+10:00', 'period2': '2025-04-14 10:08:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:52,537 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:52,537 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:52,537 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:08:52,537 - yfinance - DEBUG - params={'period1': 1744157332, 'period2': 1744589332, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:52,537 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:52,537 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:52,537 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:52,537 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:52,537 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:52,537 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:52,537 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:52,704 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744157332&period2=1744589332&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1419
2025-04-14 10:08:52,704 - yfinance - DEBUG - response code=200
2025-04-14 10:08:52,704 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:52,704 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:52,705 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:08:52,706 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:08:52,708 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:52,710 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:52,710 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:52,710 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:52,710 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:52,710 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:08:52,710 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:52,711 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:08:52+10:00', 'period2': '2025-04-14 10:08:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:52,711 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:52,711 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:52,711 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:08:52,711 - yfinance - DEBUG - params={'period1': 1744157332, 'period2': 1744589332, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:52,711 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:52,711 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:52,711 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:52,711 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:52,711 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:52,711 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:52,711 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:52,902 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744157332&period2=1744589332&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1377
2025-04-14 10:08:52,903 - yfinance - DEBUG - response code=200
2025-04-14 10:08:52,904 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:52,904 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:52,905 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:08:52,906 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:08:52,908 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:52,910 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:52,910 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:52,910 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:52,910 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:52,910 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:08:52,910 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:52,910 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:08:52+10:00', 'period2': '2025-04-14 10:08:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:52,910 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:52,910 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:52,910 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:08:52,910 - yfinance - DEBUG - params={'period1': 1744157332, 'period2': 1744589332, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:52,910 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:52,910 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:52,910 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:52,910 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:52,910 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:52,910 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:52,910 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:53,087 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744157332&period2=1744589332&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1401
2025-04-14 10:08:53,088 - yfinance - DEBUG - response code=200
2025-04-14 10:08:53,088 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:53,088 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:53,089 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:08:53,090 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:08:53,092 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:53,094 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:53,094 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:53,094 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:53,094 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:53,094 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:08:53,094 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:53,094 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:08:52+10:00', 'period2': '2025-04-14 10:08:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:53,095 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:53,095 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:53,095 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:08:53,095 - yfinance - DEBUG - params={'period1': 1744157332, 'period2': 1744589332, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:53,095 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:53,095 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:53,095 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:53,095 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:53,095 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:53,095 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:53,095 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:53,280 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744157332&period2=1744589332&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:08:53,281 - yfinance - DEBUG - response code=200
2025-04-14 10:08:53,281 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:53,281 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:53,283 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:08:53,284 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:08:53,286 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:53,287 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:53,287 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:53,287 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:53,288 - yfinance - DEBUG - Entering history()
2025-04-14 10:08:53,288 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:08:53,288 - yfinance - DEBUG -  Entering history()
2025-04-14 10:08:53,288 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:08:52+10:00', 'period2': '2025-04-14 10:08:52+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:53,288 - yfinance - DEBUG -   Entering get()
2025-04-14 10:08:53,288 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:08:53,288 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:08:53,288 - yfinance - DEBUG - params={'period1': 1744157332, 'period2': 1744589332, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:08:53,288 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:08:53,288 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:08:53,288 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:08:53,288 - yfinance - DEBUG - reusing cookie
2025-04-14 10:08:53,288 - yfinance - DEBUG - reusing crumb
2025-04-14 10:08:53,288 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:08:53,288 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:08:53,478 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744157332&period2=1744589332&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:08:53,479 - yfinance - DEBUG - response code=200
2025-04-14 10:08:53,479 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:08:53,479 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:08:53,479 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:08:53,480 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:08:53,481 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:53,482 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:08:53,482 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:08:53,482 - yfinance - DEBUG - Exiting history()
2025-04-14 10:08:53,483 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:08:53,489 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:08:53,531 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:08:53,539 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:08:53,541 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'NAB.AX', 'CSL.AX', 'BHP.AX', 'WBC.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5468073427351525, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5236511286305573, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.5074203936991961, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.49563503859843006, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.4525609277905974, 'Recommendation': 'Hold'}]}
2025-04-14 10:08:53,541 - __main__ - INFO - Running backtest...
2025-04-14 10:08:53,541 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:08:53,568 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 190, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<5 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-14 10:14:59,330 - root - INFO - Created directory: models
2025-04-14 10:14:59,330 - root - INFO - Created directory: data
2025-04-14 10:14:59,330 - root - INFO - Created directory: logs
2025-04-14 10:14:59,330 - root - INFO - Created directory: results
2025-04-14 10:14:59,330 - root - INFO - Created directory: plots
2025-04-14 10:14:59,330 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:14:59,330 - __main__ - INFO - Fetching historical data...
2025-04-14 10:14:59,330 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:14:59,330 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14.7; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-14 10:14:59,330 - yfinance - DEBUG - Entering history()
2025-04-14 10:14:59,331 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:14:59,331 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:14:59,344 - yfinance - DEBUG -  Entering history()
2025-04-14 10:14:59,344 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:14:59,344 - yfinance - DEBUG -   Entering get()
2025-04-14 10:14:59,344 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:14:59,344 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:14:59,344 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:14:59,344 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:14:59,344 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:14:59,344 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:14:59,345 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:14:59,345 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:14:59,345 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:14:59,345 - yfinance - DEBUG - reusing cookie
2025-04-14 10:14:59,353 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:14:59,611 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:14:59,613 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:14:59,613 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:14:59,614 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:14:59,616 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:14:59,892 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:00,074 - yfinance - DEBUG - response code=200
2025-04-14 10:15:00,074 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:00,074 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:00,088 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:00,089 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:00,097 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:00,099 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:00,099 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:00,099 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:00,099 - data_fetcher - INFO - Fetched 2534 periods for CBA.AX
2025-04-14 10:15:00,099 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:00,100 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:15:00,100 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:00,100 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:00,100 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:00,100 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:00,100 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:15:00,100 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:00,100 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:00,100 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:00,100 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:00,100 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:00,100 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:00,100 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:00,100 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:00,314 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:00,411 - yfinance - DEBUG - response code=200
2025-04-14 10:15:00,411 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:00,411 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:00,419 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:00,420 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:00,426 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:00,428 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:00,428 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:00,428 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:00,428 - data_fetcher - INFO - Fetched 2534 periods for BHP.AX
2025-04-14 10:15:00,428 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:00,428 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:15:00,428 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:00,428 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:00,428 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:00,428 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:00,428 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:15:00,428 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:00,428 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:00,428 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:00,429 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:00,429 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:00,429 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:00,429 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:00,429 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:00,658 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:00,706 - yfinance - DEBUG - response code=200
2025-04-14 10:15:00,707 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:00,707 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:00,717 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:15:00,718 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:15:00,722 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:00,724 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:00,724 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:00,724 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:00,724 - data_fetcher - INFO - Fetched 2534 periods for CSL.AX
2025-04-14 10:15:00,724 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:00,725 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:15:00,725 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:00,725 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:00,725 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:00,725 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:00,725 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:15:00,725 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:00,725 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:00,725 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:00,725 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:00,725 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:00,725 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:00,725 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:00,725 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:00,946 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:00,990 - yfinance - DEBUG - response code=200
2025-04-14 10:15:00,991 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:00,991 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:00,998 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:00,999 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:01,004 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:01,005 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:01,005 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:01,005 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:01,005 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:15:01,006 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:01,006 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:15:01,006 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:01,006 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:01,006 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:01,006 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:01,006 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:15:01,006 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:01,006 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:01,006 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:01,006 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:01,006 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:01,006 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:01,006 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:01,006 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:01,224 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:01,410 - yfinance - DEBUG - response code=200
2025-04-14 10:15:01,410 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:01,410 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:01,416 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:01,417 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:01,421 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:01,423 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:01,423 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:01,423 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:01,423 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:15:01,423 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:01,423 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:15:01,424 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:01,424 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:01,424 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:01,424 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:01,424 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:15:01,424 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:01,424 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:01,424 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:01,424 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:01,424 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:01,424 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:01,424 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:01,424 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:01,591 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:01,604 - yfinance - DEBUG - response code=200
2025-04-14 10:15:01,604 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:01,604 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:01,610 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:54:45
2025-04-14 10:15:01,611 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:54:45+10:00
2025-04-14 10:15:01,612 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:01,614 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:01,614 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:01,614 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:01,614 - data_fetcher - INFO - Fetched 2531 periods for ^AXJO
2025-04-14 10:15:01,615 - data_fetcher - INFO - Combined dataset shape: (15201, 9)
2025-04-14 10:15:01,615 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:15:01,615 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:15:01,678 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:15:01,686 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:15:01,690 - model_training - INFO - Train set: 12160 samples, Test set: 3041 samples
2025-04-14 10:15:01,694 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:15:01,697 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:15:01,701 - model_training - INFO - Original class distribution: [8517 2741]
2025-04-14 10:15:01,741 - model_training - INFO - Class distribution after SMOTE: [8517 8517]
2025-04-14 10:15:01,741 - __main__ - INFO - Training model...
2025-04-14 10:15:01,741 - model_training - INFO - Training Random Forest model...
2025-04-14 10:15:13,630 - __main__ - INFO - Evaluating model...
2025-04-14 10:15:13,630 - model_training - INFO - Evaluating model performance...
2025-04-14 10:15:13,746 - model_training - INFO - Model Accuracy: 0.5915
2025-04-14 10:15:13,746 - model_training - INFO - F1 Score: 0.3547
2025-04-14 10:15:13,746 - model_training - INFO - ROC AUC: 0.5936
2025-04-14 10:15:13,746 - __main__ - INFO - Saving model...
2025-04-14 10:15:13,781 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:15:13,781 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:15:13,781 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:15:13,781 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:13,782 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:15:13,782 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:13,782 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:13+10:00', 'period2': '2025-04-14 10:15:13+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:13,782 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:13,782 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:13,782 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:15:13,782 - yfinance - DEBUG - params={'period1': 1744157713, 'period2': 1744589713, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:13,782 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:13,782 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:13,782 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:13,782 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:13,782 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:13,782 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:13,782 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:13,971 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744157713&period2=1744589713&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1419
2025-04-14 10:15:13,972 - yfinance - DEBUG - response code=200
2025-04-14 10:15:13,972 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:13,972 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:13,973 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:13,974 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:13,976 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:13,979 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:13,979 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:13,979 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:13,979 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:13,979 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:15:13,979 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:13,980 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:13+10:00', 'period2': '2025-04-14 10:15:13+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:13,980 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:13,980 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:13,980 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:15:13,980 - yfinance - DEBUG - params={'period1': 1744157713, 'period2': 1744589713, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:13,980 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:13,980 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:13,980 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:13,980 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:13,980 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:13,980 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:13,980 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:14,161 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744157713&period2=1744589713&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1377
2025-04-14 10:15:14,162 - yfinance - DEBUG - response code=200
2025-04-14 10:15:14,162 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:14,162 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:14,164 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:14,165 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:14,166 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,168 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,168 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:14,168 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:14,168 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:14,168 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:15:14,168 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:14,168 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:13+10:00', 'period2': '2025-04-14 10:15:13+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:14,168 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:14,168 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:14,168 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:15:14,168 - yfinance - DEBUG - params={'period1': 1744157713, 'period2': 1744589713, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:14,168 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:14,168 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:14,168 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:14,168 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:14,168 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:14,168 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:14,168 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:14,362 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744157713&period2=1744589713&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1401
2025-04-14 10:15:14,363 - yfinance - DEBUG - response code=200
2025-04-14 10:15:14,363 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:14,363 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:14,364 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:15:14,365 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:15:14,367 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,369 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,369 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:14,369 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:14,369 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:14,369 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:15:14,369 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:14,369 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:13+10:00', 'period2': '2025-04-14 10:15:13+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:14,369 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:14,369 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:14,369 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:15:14,369 - yfinance - DEBUG - params={'period1': 1744157713, 'period2': 1744589713, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:14,369 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:14,369 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:14,369 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:14,369 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:14,369 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:14,369 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:14,369 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:14,587 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744157713&period2=1744589713&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:15:14,587 - yfinance - DEBUG - response code=200
2025-04-14 10:15:14,588 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:14,588 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:14,588 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:14,589 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:14,591 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,592 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,593 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:14,593 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:14,593 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:14,593 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:15:14,593 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:14,593 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:13+10:00', 'period2': '2025-04-14 10:15:13+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:14,593 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:14,593 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:14,593 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:15:14,593 - yfinance - DEBUG - params={'period1': 1744157713, 'period2': 1744589713, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:14,593 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:14,593 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:14,593 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:14,593 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:14,593 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:14,593 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:14,593 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:14,768 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744157713&period2=1744589713&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:15:14,768 - yfinance - DEBUG - response code=200
2025-04-14 10:15:14,768 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:14,769 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:14,769 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:14,770 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:14,771 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,773 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:14,773 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:14,773 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:14,774 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:15:14,780 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:15:14,781 - __main__ - ERROR - Error in main execution: name 'model_data' is not defined
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 98, in main
    signals = generate_signals(prepared_data, model_data)
                                              ^^^^^^^^^^
NameError: name 'model_data' is not defined
2025-04-14 10:15:26,971 - root - INFO - Created directory: models
2025-04-14 10:15:26,972 - root - INFO - Created directory: data
2025-04-14 10:15:26,972 - root - INFO - Created directory: logs
2025-04-14 10:15:26,972 - root - INFO - Created directory: results
2025-04-14 10:15:26,972 - root - INFO - Created directory: plots
2025-04-14 10:15:26,972 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:15:26,972 - __main__ - INFO - Fetching historical data...
2025-04-14 10:15:26,972 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:15:26,972 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.3 Safari/605.1.15
2025-04-14 10:15:26,972 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:26,973 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:15:26,973 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:15:26,986 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:26,986 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:26,986 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:26,986 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:26,986 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:15:26,986 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:26,986 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:26,986 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:26,986 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:26,987 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:15:26,987 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:15:26,987 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:15:26,987 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:26,995 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:15:27,200 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:15:27,200 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:15:27,201 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:27,201 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:27,201 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:15:27,477 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:27,600 - yfinance - DEBUG - response code=200
2025-04-14 10:15:27,600 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:27,600 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:27,608 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:27,610 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:27,617 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:27,619 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:27,619 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:27,619 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:27,619 - data_fetcher - INFO - Fetched 2534 periods for CBA.AX
2025-04-14 10:15:27,619 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:27,619 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:15:27,619 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:27,619 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:27,619 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:27,619 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:27,619 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:15:27,619 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:27,619 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:27,619 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:27,619 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:27,619 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:27,619 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:27,619 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:27,620 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:27,814 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:27,901 - yfinance - DEBUG - response code=200
2025-04-14 10:15:27,901 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:27,901 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:27,908 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:27,909 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:27,913 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:27,915 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:27,915 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:27,915 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:27,916 - data_fetcher - INFO - Fetched 2534 periods for BHP.AX
2025-04-14 10:15:27,916 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:27,916 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:15:27,916 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:27,916 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:27,916 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:27,916 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:27,916 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:15:27,916 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:27,916 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:27,916 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:27,916 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:27,916 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:27,916 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:27,916 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:27,916 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:28,115 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:28,290 - yfinance - DEBUG - response code=200
2025-04-14 10:15:28,290 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:28,290 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:28,300 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:15:28,301 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:15:28,305 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:28,307 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:28,307 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:28,307 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:28,307 - data_fetcher - INFO - Fetched 2534 periods for CSL.AX
2025-04-14 10:15:28,307 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:28,307 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:15:28,307 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:28,307 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:28,307 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:28,307 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:28,307 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:15:28,307 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:28,307 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:28,307 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:28,307 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:28,307 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:28,307 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:28,307 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:28,307 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:28,507 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:28,525 - yfinance - DEBUG - response code=200
2025-04-14 10:15:28,525 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:28,525 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:28,532 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:28,533 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:28,538 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:28,539 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:28,539 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:28,539 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:28,539 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:15:28,540 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:28,540 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:15:28,540 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:28,540 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:28,540 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:28,540 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:28,540 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:15:28,540 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:28,540 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:28,540 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:28,540 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:28,540 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:28,540 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:28,540 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:28,540 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:28,753 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:28,935 - yfinance - DEBUG - response code=200
2025-04-14 10:15:28,935 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:28,935 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:28,943 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:28,944 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:28,948 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:28,950 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:28,950 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:28,950 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:28,950 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:15:28,950 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:28,950 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:15:28,950 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:28,950 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:28,951 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:28,951 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:28,951 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:15:28,951 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:28,951 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:28,951 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:28,951 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:28,951 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:28,951 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:28,951 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:28,951 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:29,103 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:15:29,122 - yfinance - DEBUG - response code=200
2025-04-14 10:15:29,123 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:29,123 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:29,128 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:54:45
2025-04-14 10:15:29,129 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:54:45+10:00
2025-04-14 10:15:29,131 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:29,133 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:29,133 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:29,133 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:29,133 - data_fetcher - INFO - Fetched 2531 periods for ^AXJO
2025-04-14 10:15:29,134 - data_fetcher - INFO - Combined dataset shape: (15201, 9)
2025-04-14 10:15:29,134 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:15:29,134 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:15:29,195 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:15:29,203 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:15:29,207 - model_training - INFO - Train set: 12160 samples, Test set: 3041 samples
2025-04-14 10:15:29,212 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:15:29,215 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:15:29,219 - model_training - INFO - Original class distribution: [8518 2740]
2025-04-14 10:15:29,256 - model_training - INFO - Class distribution after SMOTE: [8518 8518]
2025-04-14 10:15:29,257 - __main__ - INFO - Training model...
2025-04-14 10:15:29,257 - model_training - INFO - Training Random Forest model...
2025-04-14 10:15:41,492 - __main__ - INFO - Evaluating model...
2025-04-14 10:15:41,492 - model_training - INFO - Evaluating model performance...
2025-04-14 10:15:41,607 - model_training - INFO - Model Accuracy: 0.5855
2025-04-14 10:15:41,607 - model_training - INFO - F1 Score: 0.3425
2025-04-14 10:15:41,607 - model_training - INFO - ROC AUC: 0.5897
2025-04-14 10:15:41,607 - __main__ - INFO - Saving model...
2025-04-14 10:15:41,641 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:15:41,641 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:15:41,641 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:15:41,641 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:41,641 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:15:41,642 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:41,642 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:41+10:00', 'period2': '2025-04-14 10:15:41+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:41,642 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:41,642 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:41,642 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:15:41,642 - yfinance - DEBUG - params={'period1': 1744157741, 'period2': 1744589741, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:41,642 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:41,642 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:41,642 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:41,642 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:41,642 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:41,642 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:41,642 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:41,836 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744157741&period2=1744589741&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1419
2025-04-14 10:15:41,836 - yfinance - DEBUG - response code=200
2025-04-14 10:15:41,836 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:41,836 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:41,837 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:41,838 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:41,840 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:41,842 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:41,842 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:41,842 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:41,842 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:41,842 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:15:41,842 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:41,842 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:41+10:00', 'period2': '2025-04-14 10:15:41+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:41,842 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:41,842 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:41,842 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:15:41,842 - yfinance - DEBUG - params={'period1': 1744157741, 'period2': 1744589741, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:41,842 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:41,842 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:41,842 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:41,843 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:41,843 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:41,843 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:41,843 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:42,033 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744157741&period2=1744589741&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1377
2025-04-14 10:15:42,034 - yfinance - DEBUG - response code=200
2025-04-14 10:15:42,034 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:42,034 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:42,036 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:42,037 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:42,038 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,040 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,040 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:42,040 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:42,040 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:42,040 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:15:42,041 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:42,041 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:41+10:00', 'period2': '2025-04-14 10:15:41+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:42,041 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:42,041 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:42,041 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:15:42,041 - yfinance - DEBUG - params={'period1': 1744157741, 'period2': 1744589741, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:42,041 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:42,041 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:42,041 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:42,041 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:42,041 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:42,041 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:42,041 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:42,227 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744157741&period2=1744589741&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1401
2025-04-14 10:15:42,228 - yfinance - DEBUG - response code=200
2025-04-14 10:15:42,228 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:42,228 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:42,230 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:15:42,231 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:15:42,233 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,234 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,234 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:42,234 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:42,235 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:42,235 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:15:42,235 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:42,235 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:41+10:00', 'period2': '2025-04-14 10:15:41+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:42,235 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:42,235 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:42,235 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:15:42,235 - yfinance - DEBUG - params={'period1': 1744157741, 'period2': 1744589741, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:42,235 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:42,235 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:42,235 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:42,235 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:42,235 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:42,235 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:42,235 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:42,416 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744157741&period2=1744589741&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:15:42,417 - yfinance - DEBUG - response code=200
2025-04-14 10:15:42,418 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:42,418 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:42,419 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:15:42,420 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:15:42,422 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,423 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,423 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:42,423 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:42,423 - yfinance - DEBUG - Entering history()
2025-04-14 10:15:42,424 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:15:42,424 - yfinance - DEBUG -  Entering history()
2025-04-14 10:15:42,424 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:15:41+10:00', 'period2': '2025-04-14 10:15:41+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:42,424 - yfinance - DEBUG -   Entering get()
2025-04-14 10:15:42,424 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:15:42,424 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:15:42,424 - yfinance - DEBUG - params={'period1': 1744157741, 'period2': 1744589741, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:15:42,424 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:15:42,424 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:15:42,424 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:15:42,424 - yfinance - DEBUG - reusing cookie
2025-04-14 10:15:42,424 - yfinance - DEBUG - reusing crumb
2025-04-14 10:15:42,424 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:15:42,424 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:15:42,614 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744157741&period2=1744589741&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:15:42,615 - yfinance - DEBUG - response code=200
2025-04-14 10:15:42,615 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:15:42,615 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:15:42,615 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:15:42,616 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:15:42,617 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,618 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:15:42,618 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:15:42,618 - yfinance - DEBUG - Exiting history()
2025-04-14 10:15:42,619 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:15:42,625 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:15:42,670 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:15:42,676 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:15:42,678 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'NAB.AX', 'CSL.AX', 'BHP.AX', 'WBC.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5588985177140683, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5125732485958236, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4928944330154144, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.48718635003998595, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.4491618653532822, 'Recommendation': 'Hold'}]}
2025-04-14 10:15:42,678 - __main__ - INFO - Running backtest...
2025-04-14 10:15:42,678 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:15:42,706 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 191, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<5 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-14 10:17:30,304 - root - INFO - Created directory: models
2025-04-14 10:17:30,304 - root - INFO - Created directory: data
2025-04-14 10:17:30,304 - root - INFO - Created directory: logs
2025-04-14 10:17:30,304 - root - INFO - Created directory: results
2025-04-14 10:17:30,304 - root - INFO - Created directory: plots
2025-04-14 10:17:30,304 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:17:30,304 - __main__ - INFO - Fetching historical data...
2025-04-14 10:17:30,304 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:17:30,304 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/131.0.2903.86
2025-04-14 10:17:30,304 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:30,305 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:17:30,305 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:17:30,318 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:30,318 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:30,319 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:30,319 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:30,319 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:17:30,319 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:30,319 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:30,319 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:30,319 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:30,319 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:17:30,319 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:17:30,319 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:17:30,319 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:30,328 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:17:30,543 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:17:30,543 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:17:30,543 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:30,543 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:30,544 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:17:30,802 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:17:30,978 - yfinance - DEBUG - response code=200
2025-04-14 10:17:30,978 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:30,978 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:30,986 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:17:30,988 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:17:30,995 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:30,997 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:30,997 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:30,997 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:30,997 - data_fetcher - INFO - Fetched 2534 periods for CBA.AX
2025-04-14 10:17:30,997 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:30,997 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:17:30,997 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:30,997 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:30,997 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:30,997 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:30,997 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:17:30,997 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:30,997 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:30,997 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:30,997 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:30,997 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:30,997 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:30,997 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:30,997 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:31,206 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:17:31,468 - yfinance - DEBUG - response code=200
2025-04-14 10:17:31,468 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:31,469 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:31,477 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:17:31,478 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:17:31,483 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:31,485 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:31,485 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:31,485 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:31,485 - data_fetcher - INFO - Fetched 2534 periods for BHP.AX
2025-04-14 10:17:31,485 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:31,485 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:17:31,485 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:31,485 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:31,485 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:31,485 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:31,485 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:17:31,485 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:31,485 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:31,485 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:31,485 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:31,486 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:31,486 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:31,486 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:31,486 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:31,677 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:17:31,773 - yfinance - DEBUG - response code=200
2025-04-14 10:17:31,773 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:31,773 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:31,781 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:17:31,781 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:17:31,786 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:31,788 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:31,788 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:31,788 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:31,788 - data_fetcher - INFO - Fetched 2534 periods for CSL.AX
2025-04-14 10:17:31,788 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:31,788 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:17:31,788 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:31,788 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:31,788 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:31,788 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:31,788 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:17:31,788 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:31,788 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:31,788 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:31,788 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:31,788 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:31,788 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:31,788 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:31,788 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:32,099 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:17:32,132 - yfinance - DEBUG - response code=200
2025-04-14 10:17:32,133 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:32,133 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:32,141 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:17:32,141 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:17:32,146 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:32,148 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:32,148 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:32,148 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:32,148 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:17:32,148 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:32,148 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:17:32,148 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:32,148 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:32,148 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:32,148 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:32,148 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:17:32,148 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:32,148 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:32,149 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:32,149 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:32,149 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:32,149 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:32,149 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:32,149 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:32,375 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:17:32,461 - yfinance - DEBUG - response code=200
2025-04-14 10:17:32,462 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:32,462 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:32,471 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:17:32,472 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:17:32,476 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:32,478 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:32,478 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:32,478 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:32,478 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:17:32,478 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:32,479 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:17:32,479 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:32,479 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:32,479 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:32,479 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:32,479 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:17:32,479 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:32,479 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:32,479 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:32,479 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:32,479 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:32,479 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:32,479 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:32,479 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:32,623 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:17:32,639 - yfinance - DEBUG - response code=200
2025-04-14 10:17:32,639 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:32,639 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:32,644 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:54:45
2025-04-14 10:17:32,645 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:54:45+10:00
2025-04-14 10:17:32,647 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:32,649 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:32,649 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:32,649 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:32,649 - data_fetcher - INFO - Fetched 2531 periods for ^AXJO
2025-04-14 10:17:32,650 - data_fetcher - INFO - Combined dataset shape: (15201, 9)
2025-04-14 10:17:32,650 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:17:32,650 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:17:32,711 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:17:32,720 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:17:32,723 - model_training - INFO - Train set: 12160 samples, Test set: 3041 samples
2025-04-14 10:17:32,728 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:17:32,731 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:17:32,735 - model_training - INFO - Original class distribution: [8518 2740]
2025-04-14 10:17:32,770 - model_training - INFO - Class distribution after SMOTE: [8518 8518]
2025-04-14 10:17:32,770 - __main__ - INFO - Training model...
2025-04-14 10:17:32,770 - model_training - INFO - Training Random Forest model...
2025-04-14 10:17:44,816 - __main__ - INFO - Evaluating model...
2025-04-14 10:17:44,816 - model_training - INFO - Evaluating model performance...
2025-04-14 10:17:44,931 - model_training - INFO - Model Accuracy: 0.5888
2025-04-14 10:17:44,931 - model_training - INFO - F1 Score: 0.3380
2025-04-14 10:17:44,931 - model_training - INFO - ROC AUC: 0.5899
2025-04-14 10:17:44,931 - __main__ - INFO - Saving model...
2025-04-14 10:17:44,965 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:17:44,965 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:17:44,965 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:17:44,965 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:44,966 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:17:44,966 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:44,966 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:17:44+10:00', 'period2': '2025-04-14 10:17:44+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:44,966 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:44,966 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:44,966 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:17:44,966 - yfinance - DEBUG - params={'period1': 1744157864, 'period2': 1744589864, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:44,966 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:44,966 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:44,966 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:44,966 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:44,966 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:44,966 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:44,966 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:45,141 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744157864&period2=1744589864&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1419
2025-04-14 10:17:45,142 - yfinance - DEBUG - response code=200
2025-04-14 10:17:45,142 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:45,142 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:45,143 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:17:45,144 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:17:45,145 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,147 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,147 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:45,147 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:45,148 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:45,148 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:17:45,148 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:45,148 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:17:44+10:00', 'period2': '2025-04-14 10:17:44+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,148 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:45,148 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:45,148 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:17:45,148 - yfinance - DEBUG - params={'period1': 1744157864, 'period2': 1744589864, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,148 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:45,148 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:45,148 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,148 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:45,148 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:45,148 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,148 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:45,324 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744157864&period2=1744589864&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1377
2025-04-14 10:17:45,325 - yfinance - DEBUG - response code=200
2025-04-14 10:17:45,326 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:45,326 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:45,329 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:17:45,329 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:17:45,330 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,332 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,332 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:45,332 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:45,332 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:45,332 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:17:45,332 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:45,332 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:17:44+10:00', 'period2': '2025-04-14 10:17:44+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,332 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:45,332 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:45,333 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:17:45,333 - yfinance - DEBUG - params={'period1': 1744157864, 'period2': 1744589864, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,333 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:45,333 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:45,333 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,333 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:45,333 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:45,333 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,333 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:45,520 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744157864&period2=1744589864&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1401
2025-04-14 10:17:45,521 - yfinance - DEBUG - response code=200
2025-04-14 10:17:45,521 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:45,521 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:45,523 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:17
2025-04-14 10:17:45,525 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:17+10:00
2025-04-14 10:17:45,527 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,529 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,529 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:45,529 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:45,529 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:45,529 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:17:45,529 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:45,530 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:17:44+10:00', 'period2': '2025-04-14 10:17:44+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,530 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:45,530 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:45,530 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:17:45,530 - yfinance - DEBUG - params={'period1': 1744157864, 'period2': 1744589864, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,530 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:45,530 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:45,530 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,530 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:45,530 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:45,530 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,530 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:45,704 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744157864&period2=1744589864&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:17:45,706 - yfinance - DEBUG - response code=200
2025-04-14 10:17:45,706 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:45,706 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:45,707 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:17:45,708 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:17:45,709 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,711 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,711 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:45,711 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:45,711 - yfinance - DEBUG - Entering history()
2025-04-14 10:17:45,711 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:17:45,711 - yfinance - DEBUG -  Entering history()
2025-04-14 10:17:45,711 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:17:44+10:00', 'period2': '2025-04-14 10:17:44+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,712 - yfinance - DEBUG -   Entering get()
2025-04-14 10:17:45,712 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:17:45,712 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:17:45,712 - yfinance - DEBUG - params={'period1': 1744157864, 'period2': 1744589864, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:17:45,712 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:17:45,712 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:17:45,712 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,712 - yfinance - DEBUG - reusing cookie
2025-04-14 10:17:45,712 - yfinance - DEBUG - reusing crumb
2025-04-14 10:17:45,712 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:17:45,712 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:17:45,887 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744157864&period2=1744589864&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:17:45,887 - yfinance - DEBUG - response code=200
2025-04-14 10:17:45,887 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:17:45,887 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:17:45,887 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:17:45,888 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:17:45,889 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,890 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:17:45,890 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:17:45,890 - yfinance - DEBUG - Exiting history()
2025-04-14 10:17:45,891 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:17:45,897 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:17:45,939 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:17:45,945 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:17:45,947 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'NAB.AX', 'CSL.AX', 'BHP.AX', 'WBC.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 154.67999267578125, 'Buy_Signal': 0, 'Buy_Probability': 0.5484258797957555, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5113092651279395, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 233.0800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.49588655976528884, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 35.41999816894531, 'Buy_Signal': 0, 'Buy_Probability': 0.48833295666988386, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.4589210217516393, 'Recommendation': 'Hold'}]}
2025-04-14 10:17:45,947 - __main__ - INFO - Running backtest...
2025-04-14 10:17:45,947 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:17:45,973 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 191, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<5 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-14 10:23:22,195 - root - INFO - Created directory: models
2025-04-14 10:23:22,196 - root - INFO - Created directory: data
2025-04-14 10:23:22,196 - root - INFO - Created directory: logs
2025-04-14 10:23:22,196 - root - INFO - Created directory: results
2025-04-14 10:23:22,196 - root - INFO - Created directory: plots
2025-04-14 10:23:22,196 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:23:22,196 - __main__ - INFO - Fetching historical data...
2025-04-14 10:23:22,196 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:23:22,196 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (X11; Linux i686; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-14 10:23:22,196 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:22,199 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:23:22,199 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:23:22,213 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:22,213 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:22,213 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:22,213 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:22,213 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:23:22,213 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:22,213 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:22,213 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:22,213 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:22,214 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:23:22,214 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:23:22,214 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:23:22,214 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:22,222 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:23:22,446 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:23:22,447 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:23:22,447 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:22,447 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:22,449 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:23:22,722 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:23:22,902 - yfinance - DEBUG - response code=200
2025-04-14 10:23:22,902 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:22,902 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:22,913 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:03:21
2025-04-14 10:23:22,916 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:03:21+10:00
2025-04-14 10:23:22,925 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:22,928 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:22,928 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:22,928 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:22,928 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-14 10:23:22,928 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:22,928 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:23:22,928 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:22,929 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:22,929 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:22,929 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:22,929 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:23:22,929 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:22,929 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:22,929 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:22,929 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:22,929 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:22,929 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:22,929 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:22,929 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:23,148 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:23:23,408 - yfinance - DEBUG - response code=200
2025-04-14 10:23:23,409 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:23,409 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:23,416 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:03:19
2025-04-14 10:23:23,417 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:03:19+10:00
2025-04-14 10:23:23,421 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:23,423 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:23,423 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:23,423 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:23,424 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-14 10:23:23,424 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:23,424 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:23:23,424 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:23,424 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:23,424 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:23,424 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:23,424 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:23:23,424 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:23,424 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:23,424 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:23,424 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:23,424 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:23,424 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:23,424 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:23,424 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:23,634 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:23:23,732 - yfinance - DEBUG - response code=200
2025-04-14 10:23:23,733 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:23,733 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:23,741 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:03:21
2025-04-14 10:23:23,741 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:03:21+10:00
2025-04-14 10:23:23,746 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:23,748 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:23,748 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:23,748 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:23,748 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-14 10:23:23,748 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:23,748 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:23:23,748 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:23,748 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:23,748 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:23,749 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:23,749 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:23:23,749 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:23,749 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:23,749 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:23,749 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:23,749 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:23,749 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:23,749 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:23,749 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:23,969 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:23:24,003 - yfinance - DEBUG - response code=200
2025-04-14 10:23:24,003 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:24,004 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:24,011 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:23:24,012 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:23:24,017 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:24,018 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:24,018 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:24,019 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:24,019 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:23:24,019 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:24,019 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:23:24,019 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:24,019 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:24,019 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:24,019 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:24,019 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:23:24,019 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:24,019 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:24,019 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:24,019 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:24,019 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:24,019 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:24,019 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:24,019 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:24,238 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:23:24,286 - yfinance - DEBUG - response code=200
2025-04-14 10:23:24,287 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:24,287 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:24,295 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:23:24,295 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:23:24,300 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:24,301 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:24,302 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:24,302 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:24,302 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:23:24,302 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:24,302 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:23:24,302 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:24,302 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:24,302 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:24,302 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:24,302 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:23:24,302 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:24,302 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:24,302 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:24,302 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:24,302 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:24,302 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:24,302 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:24,302 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:24,482 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:23:24,579 - yfinance - DEBUG - response code=200
2025-04-14 10:23:24,580 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:24,580 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:24,585 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:03:15
2025-04-14 10:23:24,586 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:03:15+10:00
2025-04-14 10:23:24,588 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:24,590 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:24,590 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:24,590 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:24,590 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-14 10:23:24,591 - data_fetcher - INFO - Combined dataset shape: (15205, 9)
2025-04-14 10:23:24,591 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:23:24,591 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:23:24,658 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:23:24,667 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:23:24,672 - model_training - INFO - Train set: 12164 samples, Test set: 3041 samples
2025-04-14 10:23:24,679 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:23:24,682 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:23:24,687 - model_training - INFO - Original class distribution: [8521 2741]
2025-04-14 10:23:24,733 - model_training - INFO - Class distribution after SMOTE: [8521 8521]
2025-04-14 10:23:24,733 - __main__ - INFO - Training model...
2025-04-14 10:23:24,733 - model_training - INFO - Training Random Forest model...
2025-04-14 10:23:37,075 - __main__ - INFO - Evaluating model...
2025-04-14 10:23:37,075 - model_training - INFO - Evaluating model performance...
2025-04-14 10:23:37,194 - model_training - INFO - Model Accuracy: 0.5859
2025-04-14 10:23:37,194 - model_training - INFO - F1 Score: 0.3461
2025-04-14 10:23:37,194 - model_training - INFO - ROC AUC: 0.5893
2025-04-14 10:23:37,194 - __main__ - INFO - Saving model...
2025-04-14 10:23:37,232 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:23:37,233 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:23:37,233 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:23:37,233 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:37,233 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:23:37,233 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:37,234 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:23:37+10:00', 'period2': '2025-04-14 10:23:37+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,234 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:37,234 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:37,234 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:23:37,234 - yfinance - DEBUG - params={'period1': 1744158217, 'period2': 1744590217, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,234 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:37,234 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:37,234 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,234 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:37,234 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:37,234 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,234 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:37,406 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744158217&period2=1744590217&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1528
2025-04-14 10:23:37,407 - yfinance - DEBUG - response code=200
2025-04-14 10:23:37,407 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:37,407 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:37,408 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:03:35
2025-04-14 10:23:37,408 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:03:35+10:00
2025-04-14 10:23:37,412 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:37,414 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:37,414 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:37,414 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:37,415 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:37,415 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:23:37,415 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:37,415 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:23:37+10:00', 'period2': '2025-04-14 10:23:37+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,415 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:37,415 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:37,415 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:23:37,415 - yfinance - DEBUG - params={'period1': 1744158217, 'period2': 1744590217, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,415 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:37,415 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:37,415 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,415 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:37,415 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:37,415 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,415 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:37,606 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744158217&period2=1744590217&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1483
2025-04-14 10:23:37,606 - yfinance - DEBUG - response code=200
2025-04-14 10:23:37,606 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:37,606 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:37,607 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:03:35
2025-04-14 10:23:37,608 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:03:35+10:00
2025-04-14 10:23:37,609 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:37,611 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:37,611 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:37,611 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:37,611 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:37,611 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:23:37,611 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:37,611 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:23:37+10:00', 'period2': '2025-04-14 10:23:37+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,611 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:37,611 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:37,611 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:23:37,611 - yfinance - DEBUG - params={'period1': 1744158217, 'period2': 1744590217, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,611 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:37,611 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:37,611 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,611 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:37,611 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:37,611 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,612 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:37,780 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744158217&period2=1744590217&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1494
2025-04-14 10:23:37,781 - yfinance - DEBUG - response code=200
2025-04-14 10:23:37,781 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:37,781 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:37,781 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:03:35
2025-04-14 10:23:37,782 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:03:35+10:00
2025-04-14 10:23:37,783 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:37,785 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:23:37,785 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:37,785 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:37,785 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:37,786 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:23:37,786 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:37,786 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:23:37+10:00', 'period2': '2025-04-14 10:23:37+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,786 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:37,786 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:37,786 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:23:37,786 - yfinance - DEBUG - params={'period1': 1744158217, 'period2': 1744590217, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,786 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:37,786 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:37,786 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,786 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:37,786 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:37,786 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,786 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:37,962 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744158217&period2=1744590217&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:23:37,963 - yfinance - DEBUG - response code=200
2025-04-14 10:23:37,963 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:37,963 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:37,964 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:23:37,964 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:23:37,965 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:37,967 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:37,967 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:37,967 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:37,967 - yfinance - DEBUG - Entering history()
2025-04-14 10:23:37,967 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:23:37,968 - yfinance - DEBUG -  Entering history()
2025-04-14 10:23:37,968 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:23:37+10:00', 'period2': '2025-04-14 10:23:37+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,968 - yfinance - DEBUG -   Entering get()
2025-04-14 10:23:37,968 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:23:37,968 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:23:37,968 - yfinance - DEBUG - params={'period1': 1744158217, 'period2': 1744590217, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:23:37,968 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:23:37,968 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:23:37,968 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,968 - yfinance - DEBUG - reusing cookie
2025-04-14 10:23:37,968 - yfinance - DEBUG - reusing crumb
2025-04-14 10:23:37,968 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:23:37,968 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:23:38,142 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744158217&period2=1744590217&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:23:38,142 - yfinance - DEBUG - response code=200
2025-04-14 10:23:38,142 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:23:38,142 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:23:38,142 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:23:38,143 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:23:38,145 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:38,146 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:23:38,146 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:23:38,146 - yfinance - DEBUG - Exiting history()
2025-04-14 10:23:38,147 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:23:38,153 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:23:38,209 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:23:38,218 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:23:38,219 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'NAB.AX', 'WBC.AX', 'BHP.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 155.3699951171875, 'Buy_Signal': 0, 'Buy_Probability': 0.5749348014967517, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5276436422408427, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.5019786284452229, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 36.47999954223633, 'Buy_Signal': 0, 'Buy_Probability': 0.5002825964690226, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 236.5800018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.4636305049866116, 'Recommendation': 'Hold'}]}
2025-04-14 10:23:38,219 - __main__ - INFO - Running backtest...
2025-04-14 10:23:38,219 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:23:38,251 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 190, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<11 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-14 10:25:54,622 - root - INFO - Created directory: models
2025-04-14 10:25:54,622 - root - INFO - Created directory: data
2025-04-14 10:25:54,622 - root - INFO - Created directory: logs
2025-04-14 10:25:54,622 - root - INFO - Created directory: results
2025-04-14 10:25:54,623 - root - INFO - Created directory: plots
2025-04-14 10:25:54,623 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:25:54,623 - __main__ - INFO - Fetching historical data...
2025-04-14 10:25:54,623 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:25:54,623 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-14 10:25:54,623 - yfinance - DEBUG - Entering history()
2025-04-14 10:25:54,623 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:25:54,624 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:25:54,637 - yfinance - DEBUG -  Entering history()
2025-04-14 10:25:54,637 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:54,637 - yfinance - DEBUG -   Entering get()
2025-04-14 10:25:54,637 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:25:54,637 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:25:54,637 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:54,637 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:25:54,637 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:25:54,637 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:25:54,637 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:25:54,638 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:25:54,638 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:25:54,638 - yfinance - DEBUG - reusing cookie
2025-04-14 10:25:54,646 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:25:54,876 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:25:54,877 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:25:54,878 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:25:54,878 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:25:54,879 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:25:55,159 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:25:55,340 - yfinance - DEBUG - response code=200
2025-04-14 10:25:55,341 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:25:55,341 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:25:55,348 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:05:54
2025-04-14 10:25:55,351 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:05:54+10:00
2025-04-14 10:25:55,357 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:55,359 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:55,359 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:25:55,359 - yfinance - DEBUG - Exiting history()
2025-04-14 10:25:55,359 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-14 10:25:55,360 - yfinance - DEBUG - Entering history()
2025-04-14 10:25:55,360 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:25:55,360 - yfinance - DEBUG -  Entering history()
2025-04-14 10:25:55,360 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:55,360 - yfinance - DEBUG -   Entering get()
2025-04-14 10:25:55,360 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:25:55,360 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:25:55,360 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:55,360 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:25:55,360 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:25:55,360 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:25:55,360 - yfinance - DEBUG - reusing cookie
2025-04-14 10:25:55,360 - yfinance - DEBUG - reusing crumb
2025-04-14 10:25:55,360 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:25:55,360 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:25:55,583 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:25:55,764 - yfinance - DEBUG - response code=200
2025-04-14 10:25:55,764 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:25:55,764 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:25:55,770 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:05:54
2025-04-14 10:25:55,771 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:05:54+10:00
2025-04-14 10:25:55,777 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:55,779 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:55,779 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:25:55,779 - yfinance - DEBUG - Exiting history()
2025-04-14 10:25:55,779 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-14 10:25:55,779 - yfinance - DEBUG - Entering history()
2025-04-14 10:25:55,779 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:25:55,779 - yfinance - DEBUG -  Entering history()
2025-04-14 10:25:55,779 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:55,779 - yfinance - DEBUG -   Entering get()
2025-04-14 10:25:55,779 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:25:55,779 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:25:55,780 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:55,780 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:25:55,780 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:25:55,780 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:25:55,780 - yfinance - DEBUG - reusing cookie
2025-04-14 10:25:55,780 - yfinance - DEBUG - reusing crumb
2025-04-14 10:25:55,780 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:25:55,780 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:25:56,002 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:25:56,183 - yfinance - DEBUG - response code=200
2025-04-14 10:25:56,183 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:25:56,183 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:25:56,191 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:05:54
2025-04-14 10:25:56,192 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:05:54+10:00
2025-04-14 10:25:56,196 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:56,198 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:56,198 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:25:56,198 - yfinance - DEBUG - Exiting history()
2025-04-14 10:25:56,199 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-14 10:25:56,199 - yfinance - DEBUG - Entering history()
2025-04-14 10:25:56,199 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:25:56,199 - yfinance - DEBUG -  Entering history()
2025-04-14 10:25:56,199 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:56,199 - yfinance - DEBUG -   Entering get()
2025-04-14 10:25:56,199 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:25:56,199 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:25:56,199 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:56,199 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:25:56,199 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:25:56,199 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:25:56,199 - yfinance - DEBUG - reusing cookie
2025-04-14 10:25:56,199 - yfinance - DEBUG - reusing crumb
2025-04-14 10:25:56,199 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:25:56,199 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:25:56,413 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:25:56,592 - yfinance - DEBUG - response code=200
2025-04-14 10:25:56,592 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:25:56,592 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:25:56,600 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:25:56,601 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:25:56,605 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:25:56,607 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:25:56,607 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:25:56,607 - yfinance - DEBUG - Exiting history()
2025-04-14 10:25:56,607 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:25:56,608 - yfinance - DEBUG - Entering history()
2025-04-14 10:25:56,608 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:25:56,608 - yfinance - DEBUG -  Entering history()
2025-04-14 10:25:56,608 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:56,608 - yfinance - DEBUG -   Entering get()
2025-04-14 10:25:56,608 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:25:56,608 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:25:56,608 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:56,608 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:25:56,608 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:25:56,608 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:25:56,608 - yfinance - DEBUG - reusing cookie
2025-04-14 10:25:56,608 - yfinance - DEBUG - reusing crumb
2025-04-14 10:25:56,608 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:25:56,608 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:25:56,841 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:25:56,881 - yfinance - DEBUG - response code=200
2025-04-14 10:25:56,881 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:25:56,881 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:25:56,889 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:25:56,890 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:25:56,895 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:25:56,896 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:25:56,896 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:25:56,896 - yfinance - DEBUG - Exiting history()
2025-04-14 10:25:56,897 - data_fetcher - INFO - Fetched 2534 periods for NAB.AX
2025-04-14 10:25:56,897 - yfinance - DEBUG - Entering history()
2025-04-14 10:25:56,897 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:25:56,897 - yfinance - DEBUG -  Entering history()
2025-04-14 10:25:56,897 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:56,897 - yfinance - DEBUG -   Entering get()
2025-04-14 10:25:56,897 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:25:56,897 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:25:56,897 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:25:56,897 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:25:56,897 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:25:56,897 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:25:56,897 - yfinance - DEBUG - reusing cookie
2025-04-14 10:25:56,897 - yfinance - DEBUG - reusing crumb
2025-04-14 10:25:56,897 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:25:56,897 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:25:57,053 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:25:57,072 - yfinance - DEBUG - response code=200
2025-04-14 10:25:57,072 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:25:57,072 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:25:57,078 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:05:45
2025-04-14 10:25:57,078 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:05:45+10:00
2025-04-14 10:25:57,080 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:57,082 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:25:57,082 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:25:57,082 - yfinance - DEBUG - Exiting history()
2025-04-14 10:25:57,082 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-14 10:25:57,083 - data_fetcher - INFO - Combined dataset shape: (15205, 9)
2025-04-14 10:25:57,083 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:25:57,083 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:25:57,144 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:25:57,153 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:25:57,157 - model_training - INFO - Train set: 12164 samples, Test set: 3041 samples
2025-04-14 10:25:57,164 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:25:57,166 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:25:57,171 - model_training - INFO - Original class distribution: [8522 2740]
2025-04-14 10:25:57,212 - model_training - INFO - Class distribution after SMOTE: [8522 8522]
2025-04-14 10:25:57,212 - __main__ - INFO - Training model...
2025-04-14 10:25:57,212 - model_training - INFO - Training Random Forest model...
2025-04-14 10:26:09,048 - __main__ - INFO - Evaluating model...
2025-04-14 10:26:09,048 - model_training - INFO - Evaluating model performance...
2025-04-14 10:26:09,163 - model_training - INFO - Model Accuracy: 0.5888
2025-04-14 10:26:09,163 - model_training - INFO - F1 Score: 0.3545
2025-04-14 10:26:09,163 - model_training - INFO - ROC AUC: 0.5944
2025-04-14 10:26:09,163 - __main__ - INFO - Saving model...
2025-04-14 10:26:09,199 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:26:09,199 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:26:09,200 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:26:09,200 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:09,200 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:26:09,200 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:09,200 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:26:09+10:00', 'period2': '2025-04-14 10:26:09+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,200 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:09,200 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:09,200 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:26:09,200 - yfinance - DEBUG - params={'period1': 1744158369, 'period2': 1744590369, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,200 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:09,200 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:09,200 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,200 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:09,200 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:09,200 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,201 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:09,442 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744158369&period2=1744590369&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1529
2025-04-14 10:26:09,443 - yfinance - DEBUG - response code=200
2025-04-14 10:26:09,443 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:09,443 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:09,447 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:06:07
2025-04-14 10:26:09,448 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:06:07+10:00
2025-04-14 10:26:09,450 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:09,452 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:09,452 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:09,452 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:09,452 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:09,452 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:26:09,452 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:09,452 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:26:09+10:00', 'period2': '2025-04-14 10:26:09+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,452 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:09,452 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:09,452 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:26:09,452 - yfinance - DEBUG - params={'period1': 1744158369, 'period2': 1744590369, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,452 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:09,452 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:09,452 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,452 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:09,452 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:09,452 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,453 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:09,662 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744158369&period2=1744590369&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1484
2025-04-14 10:26:09,663 - yfinance - DEBUG - response code=200
2025-04-14 10:26:09,663 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:09,663 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:09,665 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:06:08
2025-04-14 10:26:09,666 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:06:08+10:00
2025-04-14 10:26:09,668 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:09,670 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:09,670 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:09,670 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:09,670 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:09,670 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:26:09,670 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:09,670 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:26:09+10:00', 'period2': '2025-04-14 10:26:09+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,670 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:09,670 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:09,670 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:26:09,670 - yfinance - DEBUG - params={'period1': 1744158369, 'period2': 1744590369, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,670 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:09,670 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:09,670 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,670 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:09,670 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:09,670 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,670 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:09,852 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744158369&period2=1744590369&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1481
2025-04-14 10:26:09,853 - yfinance - DEBUG - response code=200
2025-04-14 10:26:09,853 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:09,853 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:09,855 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:06:04
2025-04-14 10:26:09,857 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:06:04+10:00
2025-04-14 10:26:09,858 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:09,859 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:09,859 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:09,859 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:09,859 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:09,859 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:26:09,860 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:09,860 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:26:09+10:00', 'period2': '2025-04-14 10:26:09+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,860 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:09,860 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:09,860 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:26:09,860 - yfinance - DEBUG - params={'period1': 1744158369, 'period2': 1744590369, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:09,860 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:09,860 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:09,860 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,860 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:09,860 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:09,860 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:09,860 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:10,061 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744158369&period2=1744590369&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:26:10,061 - yfinance - DEBUG - response code=200
2025-04-14 10:26:10,061 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:10,061 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:10,062 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:26:10,062 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:26:10,063 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:26:10,065 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:26:10,065 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:10,065 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:10,065 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:10,065 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:26:10,066 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:10,066 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:26:09+10:00', 'period2': '2025-04-14 10:26:09+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:10,066 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:10,066 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:10,066 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:26:10,066 - yfinance - DEBUG - params={'period1': 1744158369, 'period2': 1744590369, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:10,066 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:10,066 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:10,066 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:10,066 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:10,066 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:10,066 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:10,066 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:10,258 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744158369&period2=1744590369&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1393
2025-04-14 10:26:10,259 - yfinance - DEBUG - response code=200
2025-04-14 10:26:10,259 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:10,259 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:10,260 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:16
2025-04-14 10:26:10,261 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:16+10:00
2025-04-14 10:26:10,264 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:26:10,268 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:26:10,268 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:10,268 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:10,269 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:26:10,275 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:26:10,325 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:26:10,332 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:26:10,334 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'NAB.AX', 'WBC.AX', 'CSL.AX', 'BHP.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 155.41000366210938, 'Buy_Signal': 0, 'Buy_Probability': 0.569683414357784, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.2400016784668, 'Buy_Signal': 0, 'Buy_Probability': 0.5508383897727684, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.5282803668163364, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 236.7100067138672, 'Buy_Signal': 0, 'Buy_Probability': 0.5164513684264084, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 36.45000076293945, 'Buy_Signal': 0, 'Buy_Probability': 0.5147726163507698, 'Recommendation': 'Hold'}]}
2025-04-14 10:26:10,334 - __main__ - INFO - Running backtest...
2025-04-14 10:26:10,334 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:26:10,359 - __main__ - ERROR - Error in main execution: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 190, in run_backtest
    data_feed = bt.feeds.PandasData(
        dataname=data,
    ...<11 lines>...
        name=ticker
    )
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: PandasData.__init__() got an unexpected keyword argument 'buy_signal'
2025-04-14 10:26:55,953 - root - INFO - Created directory: models
2025-04-14 10:26:55,953 - root - INFO - Created directory: data
2025-04-14 10:26:55,953 - root - INFO - Created directory: logs
2025-04-14 10:26:55,953 - root - INFO - Created directory: results
2025-04-14 10:26:55,953 - root - INFO - Created directory: plots
2025-04-14 10:26:55,953 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:26:55,953 - __main__ - INFO - Fetching historical data...
2025-04-14 10:26:55,953 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:26:55,953 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.3 Safari/605.1.15
2025-04-14 10:26:55,954 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:55,954 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:26:55,954 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:26:55,968 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:55,968 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:55,968 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:55,968 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:55,968 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:26:55,968 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:55,968 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:55,968 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:55,968 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:55,969 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:26:55,969 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:26:55,969 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:26:55,969 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:55,978 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:26:56,188 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:26:56,190 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:26:56,191 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:56,191 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:56,192 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:26:56,443 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:26:56,626 - yfinance - DEBUG - response code=200
2025-04-14 10:26:56,627 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:56,627 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:56,633 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:06:54
2025-04-14 10:26:56,636 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:06:54+10:00
2025-04-14 10:26:56,643 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:56,645 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:56,645 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:56,645 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:56,645 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-14 10:26:56,645 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:56,645 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:26:56,645 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:56,645 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:56,646 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:56,646 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:56,646 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:26:56,646 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:56,646 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:56,646 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:56,646 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:56,646 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:56,646 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:56,646 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:56,646 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:57,043 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:26:57,298 - yfinance - DEBUG - response code=200
2025-04-14 10:26:57,299 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:57,299 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:57,307 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:06:55
2025-04-14 10:26:57,308 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:06:55+10:00
2025-04-14 10:26:57,312 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:57,314 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:57,314 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:57,314 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:57,315 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-14 10:26:57,315 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:57,315 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:26:57,315 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:57,315 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:57,315 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:57,315 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:57,315 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:26:57,315 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:57,315 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:57,315 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:57,315 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:57,315 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:57,315 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:57,315 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:57,315 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:57,514 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:26:57,686 - yfinance - DEBUG - response code=200
2025-04-14 10:26:57,687 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:57,687 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:57,698 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:06:55
2025-04-14 10:26:57,699 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:06:55+10:00
2025-04-14 10:26:57,704 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:57,706 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:57,706 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:57,706 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:57,706 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-14 10:26:57,707 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:57,707 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:26:57,707 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:57,707 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:57,707 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:57,707 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:57,707 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:26:57,707 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:57,707 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:57,707 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:57,707 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:57,707 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:57,707 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:57,707 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:57,707 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:58,047 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:26:58,132 - yfinance - DEBUG - response code=200
2025-04-14 10:26:58,132 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:58,132 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:58,141 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:26:58,141 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:26:58,146 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:26:58,148 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:26:58,148 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:58,148 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:58,148 - data_fetcher - INFO - Fetched 2534 periods for WBC.AX
2025-04-14 10:26:58,148 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:58,148 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:26:58,148 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:58,148 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:58,148 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:58,149 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:58,149 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:26:58,149 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:58,149 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:58,149 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:58,149 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:58,149 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:58,149 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:58,149 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:58,149 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:58,340 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:26:58,519 - yfinance - DEBUG - response code=200
2025-04-14 10:26:58,520 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:58,520 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:58,527 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:06:54
2025-04-14 10:26:58,528 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:06:54+10:00
2025-04-14 10:26:58,533 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:58,534 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:58,534 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:58,534 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:58,534 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-14 10:26:58,535 - yfinance - DEBUG - Entering history()
2025-04-14 10:26:58,535 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:26:58,535 - yfinance - DEBUG -  Entering history()
2025-04-14 10:26:58,535 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:58,535 - yfinance - DEBUG -   Entering get()
2025-04-14 10:26:58,535 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:26:58,535 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:26:58,535 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:26:58,535 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:26:58,535 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:26:58,535 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:26:58,535 - yfinance - DEBUG - reusing cookie
2025-04-14 10:26:58,535 - yfinance - DEBUG - reusing crumb
2025-04-14 10:26:58,535 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:26:58,535 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:26:58,683 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:26:58,699 - yfinance - DEBUG - response code=200
2025-04-14 10:26:58,699 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:26:58,699 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:26:58,703 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:06:45
2025-04-14 10:26:58,704 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:06:45+10:00
2025-04-14 10:26:58,705 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:58,707 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:26:58,708 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:26:58,708 - yfinance - DEBUG - Exiting history()
2025-04-14 10:26:58,708 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-14 10:26:58,708 - data_fetcher - INFO - Combined dataset shape: (15206, 9)
2025-04-14 10:26:58,708 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:26:58,709 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:26:58,773 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:26:58,781 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:26:58,785 - model_training - INFO - Train set: 12164 samples, Test set: 3042 samples
2025-04-14 10:26:58,792 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:26:58,795 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:26:58,798 - model_training - INFO - Original class distribution: [8521 2741]
2025-04-14 10:26:58,836 - model_training - INFO - Class distribution after SMOTE: [8521 8521]
2025-04-14 10:26:58,836 - __main__ - INFO - Training model...
2025-04-14 10:26:58,836 - model_training - INFO - Training Random Forest model...
2025-04-14 10:27:10,844 - __main__ - INFO - Evaluating model...
2025-04-14 10:27:10,845 - model_training - INFO - Evaluating model performance...
2025-04-14 10:27:10,960 - model_training - INFO - Model Accuracy: 0.5837
2025-04-14 10:27:10,960 - model_training - INFO - F1 Score: 0.3509
2025-04-14 10:27:10,960 - model_training - INFO - ROC AUC: 0.5893
2025-04-14 10:27:10,960 - __main__ - INFO - Saving model...
2025-04-14 10:27:10,994 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:27:10,994 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:27:10,994 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:27:10,994 - yfinance - DEBUG - Entering history()
2025-04-14 10:27:10,995 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:27:10,995 - yfinance - DEBUG -  Entering history()
2025-04-14 10:27:10,995 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:27:10+10:00', 'period2': '2025-04-14 10:27:10+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:10,995 - yfinance - DEBUG -   Entering get()
2025-04-14 10:27:10,995 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:27:10,995 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:27:10,995 - yfinance - DEBUG - params={'period1': 1744158430, 'period2': 1744590430, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:10,995 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:27:10,995 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:27:10,995 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:27:10,995 - yfinance - DEBUG - reusing cookie
2025-04-14 10:27:10,995 - yfinance - DEBUG - reusing crumb
2025-04-14 10:27:10,995 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:27:10,995 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:27:11,177 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744158430&period2=1744590430&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1527
2025-04-14 10:27:11,178 - yfinance - DEBUG - response code=200
2025-04-14 10:27:11,178 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:27:11,178 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:27:11,179 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:07:09
2025-04-14 10:27:11,179 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:07:09+10:00
2025-04-14 10:27:11,181 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,183 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,183 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:27:11,183 - yfinance - DEBUG - Exiting history()
2025-04-14 10:27:11,183 - yfinance - DEBUG - Entering history()
2025-04-14 10:27:11,183 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:27:11,183 - yfinance - DEBUG -  Entering history()
2025-04-14 10:27:11,183 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:27:10+10:00', 'period2': '2025-04-14 10:27:10+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,183 - yfinance - DEBUG -   Entering get()
2025-04-14 10:27:11,184 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:27:11,184 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:27:11,184 - yfinance - DEBUG - params={'period1': 1744158430, 'period2': 1744590430, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,184 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:27:11,184 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:27:11,184 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,184 - yfinance - DEBUG - reusing cookie
2025-04-14 10:27:11,184 - yfinance - DEBUG - reusing crumb
2025-04-14 10:27:11,184 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,184 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:27:11,370 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744158430&period2=1744590430&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1485
2025-04-14 10:27:11,371 - yfinance - DEBUG - response code=200
2025-04-14 10:27:11,371 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:27:11,371 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:27:11,373 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:07:09
2025-04-14 10:27:11,373 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:07:09+10:00
2025-04-14 10:27:11,375 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,376 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,376 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:27:11,376 - yfinance - DEBUG - Exiting history()
2025-04-14 10:27:11,377 - yfinance - DEBUG - Entering history()
2025-04-14 10:27:11,377 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:27:11,377 - yfinance - DEBUG -  Entering history()
2025-04-14 10:27:11,377 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:27:10+10:00', 'period2': '2025-04-14 10:27:10+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,377 - yfinance - DEBUG -   Entering get()
2025-04-14 10:27:11,377 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:27:11,377 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:27:11,377 - yfinance - DEBUG - params={'period1': 1744158430, 'period2': 1744590430, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,377 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:27:11,377 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:27:11,377 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,377 - yfinance - DEBUG - reusing cookie
2025-04-14 10:27:11,377 - yfinance - DEBUG - reusing crumb
2025-04-14 10:27:11,377 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,377 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:27:11,540 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744158430&period2=1744590430&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1497
2025-04-14 10:27:11,541 - yfinance - DEBUG - response code=200
2025-04-14 10:27:11,542 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:27:11,542 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:27:11,543 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:07:09
2025-04-14 10:27:11,544 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:07:09+10:00
2025-04-14 10:27:11,545 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,547 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,547 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:27:11,547 - yfinance - DEBUG - Exiting history()
2025-04-14 10:27:11,547 - yfinance - DEBUG - Entering history()
2025-04-14 10:27:11,547 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:27:11,547 - yfinance - DEBUG -  Entering history()
2025-04-14 10:27:11,547 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:27:10+10:00', 'period2': '2025-04-14 10:27:10+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,547 - yfinance - DEBUG -   Entering get()
2025-04-14 10:27:11,547 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:27:11,547 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:27:11,547 - yfinance - DEBUG - params={'period1': 1744158430, 'period2': 1744590430, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,547 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:27:11,547 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:27:11,547 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,547 - yfinance - DEBUG - reusing cookie
2025-04-14 10:27:11,547 - yfinance - DEBUG - reusing crumb
2025-04-14 10:27:11,547 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,547 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:27:11,719 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744158430&period2=1744590430&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1406
2025-04-14 10:27:11,720 - yfinance - DEBUG - response code=200
2025-04-14 10:27:11,720 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:27:11,720 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:27:11,722 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-11 06:10:15
2025-04-14 10:27:11,723 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-11 16:10:15+10:00
2025-04-14 10:27:11,724 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:27:11,725 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-11 00:00:00+10:00
2025-04-14 10:27:11,725 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:27:11,726 - yfinance - DEBUG - Exiting history()
2025-04-14 10:27:11,726 - yfinance - DEBUG - Entering history()
2025-04-14 10:27:11,726 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:27:11,726 - yfinance - DEBUG -  Entering history()
2025-04-14 10:27:11,726 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:27:10+10:00', 'period2': '2025-04-14 10:27:10+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,726 - yfinance - DEBUG -   Entering get()
2025-04-14 10:27:11,726 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:27:11,726 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:27:11,726 - yfinance - DEBUG - params={'period1': 1744158430, 'period2': 1744590430, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:27:11,726 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:27:11,726 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:27:11,726 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,726 - yfinance - DEBUG - reusing cookie
2025-04-14 10:27:11,726 - yfinance - DEBUG - reusing crumb
2025-04-14 10:27:11,726 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:27:11,726 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:27:11,907 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744158430&period2=1744590430&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1504
2025-04-14 10:27:11,908 - yfinance - DEBUG - response code=200
2025-04-14 10:27:11,908 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:27:11,908 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:27:11,908 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:07:09
2025-04-14 10:27:11,908 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:07:09+10:00
2025-04-14 10:27:11,910 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,911 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:27:11,911 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:27:11,911 - yfinance - DEBUG - Exiting history()
2025-04-14 10:27:11,912 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:27:11,918 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:27:11,964 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:27:11,972 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:27:11,974 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Buy': ['CBA.AX'], 'Hold': ['BHP.AX', 'WBC.AX', 'NAB.AX', 'CSL.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 155.6199951171875, 'Buy_Signal': 1, 'Buy_Probability': 0.6328474336881496, 'Recommendation': 'Buy'}, {'Ticker': 'BHP.AX', 'Close': 36.400001525878906, 'Buy_Signal': 0, 'Buy_Probability': 0.5354895475499252, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.040000915527344, 'Buy_Signal': 0, 'Buy_Probability': 0.4673915637420572, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.380001068115234, 'Buy_Signal': 0, 'Buy_Probability': 0.4592274399349431, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 235.94000244140625, 'Buy_Signal': 0, 'Buy_Probability': 0.44750614397482713, 'Recommendation': 'Hold'}]}
2025-04-14 10:27:11,974 - __main__ - INFO - Running backtest...
2025-04-14 10:27:11,974 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:27:12,003 - __main__ - ERROR - Error in main execution: name 'MLDataFeed' is not defined
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 187, in run_backtest
    data_feed = MLDataFeed(
                ^^^^^^^^^^
NameError: name 'MLDataFeed' is not defined
2025-04-14 10:30:17,655 - root - INFO - Created directory: models
2025-04-14 10:30:17,655 - root - INFO - Created directory: data
2025-04-14 10:30:17,656 - root - INFO - Created directory: logs
2025-04-14 10:30:17,656 - root - INFO - Created directory: results
2025-04-14 10:30:17,656 - root - INFO - Created directory: plots
2025-04-14 10:30:17,656 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:30:17,656 - __main__ - INFO - Fetching historical data...
2025-04-14 10:30:17,656 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:30:17,656 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 14.7; rv:135.0) Gecko/20100101 Firefox/135.0
2025-04-14 10:30:17,656 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:17,659 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:30:17,659 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:30:17,673 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:17,673 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:17,673 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:17,673 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:17,673 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:30:17,673 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:17,673 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:17,673 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:17,673 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:17,674 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:30:17,674 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:30:17,674 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:30:17,674 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:17,682 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:30:17,898 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:30:17,898 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:30:17,898 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:17,899 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:17,900 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:30:18,177 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:30:18,394 - yfinance - DEBUG - response code=200
2025-04-14 10:30:18,394 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:18,394 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:18,407 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:10:17
2025-04-14 10:30:18,411 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:10:17+10:00
2025-04-14 10:30:18,421 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:18,424 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:18,424 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:18,424 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:18,424 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-14 10:30:18,424 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:18,424 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:30:18,424 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:18,425 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:18,425 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:18,425 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:18,425 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:30:18,425 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:18,425 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:18,425 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:18,425 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:18,425 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:18,425 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:18,425 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:18,425 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:18,665 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:30:18,756 - yfinance - DEBUG - response code=200
2025-04-14 10:30:18,756 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:18,756 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:18,761 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:10:17
2025-04-14 10:30:18,762 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:10:17+10:00
2025-04-14 10:30:18,767 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:18,769 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:18,769 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:18,769 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:18,769 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-14 10:30:18,769 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:18,770 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:30:18,770 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:18,770 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:18,770 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:18,770 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:18,770 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:30:18,770 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:18,770 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:18,770 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:18,770 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:18,770 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:18,770 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:18,770 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:18,770 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:18,950 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:30:19,047 - yfinance - DEBUG - response code=200
2025-04-14 10:30:19,047 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:19,047 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:19,053 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:10:17
2025-04-14 10:30:19,054 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:10:17+10:00
2025-04-14 10:30:19,059 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:19,060 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:19,060 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:19,060 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:19,061 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-14 10:30:19,061 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:19,061 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:30:19,061 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:19,061 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:19,061 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:19,061 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:19,061 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:30:19,061 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:19,061 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:19,061 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:19,061 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:19,061 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:19,061 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:19,061 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:19,061 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:19,282 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:30:19,324 - yfinance - DEBUG - response code=200
2025-04-14 10:30:19,324 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:19,324 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:19,334 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:10:17
2025-04-14 10:30:19,335 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:10:17+10:00
2025-04-14 10:30:19,340 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:19,341 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:19,341 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:19,341 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:19,341 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-14 10:30:19,342 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:19,342 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:30:19,342 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:19,342 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:19,342 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:19,342 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:19,342 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:30:19,342 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:19,342 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:19,342 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:19,342 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:19,342 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:19,342 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:19,342 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:19,342 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:19,539 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:30:19,637 - yfinance - DEBUG - response code=200
2025-04-14 10:30:19,637 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:19,637 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:19,642 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:10:15
2025-04-14 10:30:19,643 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:10:15+10:00
2025-04-14 10:30:19,648 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:19,650 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:19,651 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:19,651 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:19,651 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-14 10:30:19,651 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:19,651 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:30:19,651 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:19,651 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:19,651 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:19,651 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:19,651 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:30:19,651 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:19,651 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:19,651 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:19,651 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:19,651 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:19,651 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:19,651 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:19,651 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:19,823 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:30:20,007 - yfinance - DEBUG - response code=200
2025-04-14 10:30:20,007 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:20,007 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:20,011 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:10:14
2025-04-14 10:30:20,011 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:10:14+10:00
2025-04-14 10:30:20,013 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:20,016 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:20,016 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:20,016 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:20,016 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-14 10:30:20,016 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-14 10:30:20,017 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:30:20,017 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:30:20,083 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:30:20,093 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:30:20,097 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-14 10:30:20,103 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:30:20,107 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:30:20,112 - model_training - INFO - Original class distribution: [8523 2740]
2025-04-14 10:30:20,165 - model_training - INFO - Class distribution after SMOTE: [8523 8523]
2025-04-14 10:30:20,165 - __main__ - INFO - Training model...
2025-04-14 10:30:20,165 - model_training - INFO - Training Random Forest model...
2025-04-14 10:30:32,171 - __main__ - INFO - Evaluating model...
2025-04-14 10:30:32,171 - model_training - INFO - Evaluating model performance...
2025-04-14 10:30:32,289 - model_training - INFO - Model Accuracy: 0.5903
2025-04-14 10:30:32,289 - model_training - INFO - F1 Score: 0.3457
2025-04-14 10:30:32,289 - model_training - INFO - ROC AUC: 0.5953
2025-04-14 10:30:32,289 - __main__ - INFO - Saving model...
2025-04-14 10:30:32,322 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:30:32,322 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:30:32,322 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:30:32,322 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:32,323 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:30:32,323 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:32,323 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:30:32+10:00', 'period2': '2025-04-14 10:30:32+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,323 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:32,323 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:32,323 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:30:32,323 - yfinance - DEBUG - params={'period1': 1744158632, 'period2': 1744590632, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,323 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:32,323 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:32,323 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,323 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:32,323 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:32,323 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,323 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:32,497 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744158632&period2=1744590632&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1531
2025-04-14 10:30:32,497 - yfinance - DEBUG - response code=200
2025-04-14 10:30:32,497 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:32,497 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:32,498 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:10:30
2025-04-14 10:30:32,499 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:10:30+10:00
2025-04-14 10:30:32,503 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:32,505 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:32,505 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:32,505 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:32,505 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:32,505 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:30:32,505 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:32,505 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:30:32+10:00', 'period2': '2025-04-14 10:30:32+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,505 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:32,505 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:32,505 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:30:32,505 - yfinance - DEBUG - params={'period1': 1744158632, 'period2': 1744590632, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,505 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:32,505 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:32,505 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,505 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:32,505 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:32,505 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,505 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:32,712 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744158632&period2=1744590632&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1484
2025-04-14 10:30:32,717 - yfinance - DEBUG - response code=200
2025-04-14 10:30:32,717 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:32,717 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:32,719 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:10:30
2025-04-14 10:30:32,720 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:10:30+10:00
2025-04-14 10:30:32,722 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:32,724 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:32,724 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:32,724 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:32,724 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:32,724 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:30:32,724 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:32,725 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:30:32+10:00', 'period2': '2025-04-14 10:30:32+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,725 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:32,725 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:32,725 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:30:32,725 - yfinance - DEBUG - params={'period1': 1744158632, 'period2': 1744590632, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,725 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:32,725 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:32,725 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,725 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:32,725 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:32,725 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,725 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:32,919 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744158632&period2=1744590632&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1497
2025-04-14 10:30:32,920 - yfinance - DEBUG - response code=200
2025-04-14 10:30:32,920 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:32,921 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:32,922 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:10:30
2025-04-14 10:30:32,923 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:10:30+10:00
2025-04-14 10:30:32,925 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:32,927 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:32,927 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:32,927 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:32,927 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:32,927 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:30:32,927 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:32,927 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:30:32+10:00', 'period2': '2025-04-14 10:30:32+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,927 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:32,927 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:32,927 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:30:32,927 - yfinance - DEBUG - params={'period1': 1744158632, 'period2': 1744590632, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:32,927 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:32,927 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:32,927 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,927 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:32,927 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:32,927 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:32,927 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:33,132 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744158632&period2=1744590632&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1514
2025-04-14 10:30:33,133 - yfinance - DEBUG - response code=200
2025-04-14 10:30:33,134 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:33,134 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:33,136 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:10:30
2025-04-14 10:30:33,137 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:10:30+10:00
2025-04-14 10:30:33,139 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:33,140 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:33,140 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:33,140 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:33,141 - yfinance - DEBUG - Entering history()
2025-04-14 10:30:33,141 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:30:33,141 - yfinance - DEBUG -  Entering history()
2025-04-14 10:30:33,141 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:30:32+10:00', 'period2': '2025-04-14 10:30:32+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:33,141 - yfinance - DEBUG -   Entering get()
2025-04-14 10:30:33,141 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:30:33,141 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:30:33,141 - yfinance - DEBUG - params={'period1': 1744158632, 'period2': 1744590632, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:30:33,141 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:30:33,141 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:30:33,141 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:30:33,141 - yfinance - DEBUG - reusing cookie
2025-04-14 10:30:33,141 - yfinance - DEBUG - reusing crumb
2025-04-14 10:30:33,141 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:30:33,141 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:30:33,347 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744158632&period2=1744590632&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1505
2025-04-14 10:30:33,348 - yfinance - DEBUG - response code=200
2025-04-14 10:30:33,348 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:30:33,348 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:30:33,350 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:10:25
2025-04-14 10:30:33,351 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:10:25+10:00
2025-04-14 10:30:33,352 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:33,354 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:30:33,354 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:30:33,354 - yfinance - DEBUG - Exiting history()
2025-04-14 10:30:33,354 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:30:33,360 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:30:33,409 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:30:33,418 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:30:33,420 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Buy': ['CBA.AX'], 'Hold': ['BHP.AX', 'CSL.AX', 'NAB.AX', 'WBC.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 155.13999938964844, 'Buy_Signal': 1, 'Buy_Probability': 0.61671096902006, 'Recommendation': 'Buy'}, {'Ticker': 'BHP.AX', 'Close': 36.36000061035156, 'Buy_Signal': 0, 'Buy_Probability': 0.5265293037918862, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 235.52999877929688, 'Buy_Signal': 0, 'Buy_Probability': 0.4863159486136757, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.369998931884766, 'Buy_Signal': 0, 'Buy_Probability': 0.4820897420645244, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.280000686645508, 'Buy_Signal': 0, 'Buy_Probability': 0.43933056146078014, 'Recommendation': 'Hold'}]}
2025-04-14 10:30:33,420 - __main__ - INFO - Running backtest...
2025-04-14 10:30:33,420 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:30:33,450 - backtest_engine - INFO - Running backtest...
2025-04-14 10:30:33,450 - backtest_engine - INFO - Initial portfolio value: $100000.00
2025-04-14 10:30:34,342 - __main__ - ERROR - Error in main execution: module 'backtrader.indicators' has no attribute 'BooleanIndicator'
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 110, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 221, in run_backtest
    results = cerebro.run()
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/cerebro.py", line 1132, in run
    runstrat = self.runstrategies(iterstrat)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/cerebro.py", line 1222, in runstrategies
    strat = stratcls(*sargs, **skwargs)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 88, in __call__
    _obj, args, kwargs = cls.doinit(_obj, *args, **kwargs)
                         ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/venv/lib/python3.13/site-packages/backtrader/metabase.py", line 78, in doinit
    _obj.__init__(*args, **kwargs)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 42, in __init__
    self.buy_signals[d] = bt.indicators.BooleanIndicator(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'backtrader.indicators' has no attribute 'BooleanIndicator'. Did you mean: 'AroonIndicator'?
2025-04-14 10:31:43,085 - root - INFO - Created directory: models
2025-04-14 10:31:43,085 - root - INFO - Created directory: data
2025-04-14 10:31:43,085 - root - INFO - Created directory: logs
2025-04-14 10:31:43,085 - root - INFO - Created directory: results
2025-04-14 10:31:43,085 - root - INFO - Created directory: plots
2025-04-14 10:31:43,085 - __main__ - INFO - Starting stock prediction system
2025-04-14 10:31:43,085 - __main__ - INFO - Fetching historical data...
2025-04-14 10:31:43,085 - data_fetcher - INFO - Fetching 10y of 1d data for 6 stocks/indices...
2025-04-14 10:31:43,085 - yfinance - DEBUG - Using User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/131.0.2903.86
2025-04-14 10:31:43,085 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:43,086 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-04-14 10:31:43,086 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:31:43,099 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:43,099 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:43,099 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:43,099 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:43,099 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:31:43,099 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:43,099 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:43,099 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:43,099 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:43,100 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-04-14 10:31:43,100 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-04-14 10:31:43,100 - yfinance - DEBUG - loaded persistent cookie
2025-04-14 10:31:43,100 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:43,108 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-04-14 10:31:43,326 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-04-14 10:31:43,327 - yfinance - DEBUG - crumb = 'g3dXUdqXiLV'
2025-04-14 10:31:43,328 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:43,328 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:43,331 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-04-14 10:31:43,639 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:31:43,811 - yfinance - DEBUG - response code=200
2025-04-14 10:31:43,811 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:43,811 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:43,819 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:11:39
2025-04-14 10:31:43,821 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:11:39+10:00
2025-04-14 10:31:43,828 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:43,830 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:43,830 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:43,830 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:43,830 - data_fetcher - INFO - Fetched 2535 periods for CBA.AX
2025-04-14 10:31:43,830 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:43,830 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:31:43,830 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:43,830 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:43,830 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:43,830 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:43,830 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:31:43,830 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:43,830 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:43,830 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:43,830 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:43,830 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:43,830 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:43,830 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:43,830 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:44,046 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:31:44,139 - yfinance - DEBUG - response code=200
2025-04-14 10:31:44,139 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:44,139 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:44,148 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:11:40
2025-04-14 10:31:44,149 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:11:40+10:00
2025-04-14 10:31:44,154 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:44,155 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:44,156 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:44,156 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:44,156 - data_fetcher - INFO - Fetched 2535 periods for BHP.AX
2025-04-14 10:31:44,156 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:44,156 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:31:44,156 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:44,156 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:44,156 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:44,156 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:44,156 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:31:44,156 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:44,156 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:44,156 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:44,156 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:44,156 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:44,156 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:44,156 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:44,156 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:44,337 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:31:44,432 - yfinance - DEBUG - response code=200
2025-04-14 10:31:44,432 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:44,432 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:44,436 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:11:42
2025-04-14 10:31:44,437 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:11:42+10:00
2025-04-14 10:31:44,441 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:44,443 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:44,443 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:44,443 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:44,443 - data_fetcher - INFO - Fetched 2535 periods for CSL.AX
2025-04-14 10:31:44,443 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:44,444 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:31:44,444 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:44,444 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:44,444 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:44,444 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:44,444 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:31:44,444 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:44,444 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:44,444 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:44,444 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:44,444 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:44,444 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:44,444 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:44,444 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:44,657 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:31:44,839 - yfinance - DEBUG - response code=200
2025-04-14 10:31:44,839 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:44,839 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:44,847 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:11:42
2025-04-14 10:31:44,848 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:11:42+10:00
2025-04-14 10:31:44,853 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:44,857 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:44,857 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:44,857 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:44,857 - data_fetcher - INFO - Fetched 2535 periods for WBC.AX
2025-04-14 10:31:44,858 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:44,858 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:31:44,858 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:44,858 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:44,858 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:44,858 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:44,858 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:31:44,858 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:44,858 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:44,858 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:44,858 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:44,858 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:44,858 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:44,858 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:44,858 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:45,175 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:31:45,238 - yfinance - DEBUG - response code=200
2025-04-14 10:31:45,238 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:45,238 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:45,252 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:11:34
2025-04-14 10:31:45,253 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:11:34+10:00
2025-04-14 10:31:45,258 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:45,259 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:45,260 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:45,260 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:45,260 - data_fetcher - INFO - Fetched 2535 periods for NAB.AX
2025-04-14 10:31:45,260 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:45,260 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^AXJO', 1, 0])
2025-04-14 10:31:45,260 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:45,260 - yfinance - DEBUG - ^AXJO: Yahoo GET parameters: {'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:45,260 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:45,260 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:45,260 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/^AXJO
2025-04-14 10:31:45,260 - yfinance - DEBUG - params={'range': '10y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:45,260 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:45,260 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:45,260 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:45,260 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:45,260 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:45,260 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:45,260 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:45,415 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/%5EAXJO?range=10y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 None
2025-04-14 10:31:45,596 - yfinance - DEBUG - response code=200
2025-04-14 10:31:45,597 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:45,597 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:45,603 - yfinance - DEBUG - ^AXJO: yfinance received OHLC data: 2015-04-14 00:00:00 -> 2025-04-14 00:11:14
2025-04-14 10:31:45,604 - yfinance - DEBUG - ^AXJO: OHLC after cleaning: 2015-04-14 10:00:00+10:00 -> 2025-04-14 10:11:14+10:00
2025-04-14 10:31:45,606 - yfinance - DEBUG - ^AXJO: OHLC after combining events: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:45,608 - yfinance - DEBUG - ^AXJO: yfinance returning OHLC: 2015-04-14 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:45,608 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:45,608 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:45,608 - data_fetcher - INFO - Fetched 2532 periods for ^AXJO
2025-04-14 10:31:45,609 - data_fetcher - INFO - Combined dataset shape: (15207, 9)
2025-04-14 10:31:45,609 - __main__ - INFO - Performing feature engineering...
2025-04-14 10:31:45,609 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:31:45,671 - feature_engineering - INFO - Creating target variables with 0.02 threshold, looking 5 periods ahead...
2025-04-14 10:31:45,680 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:31:45,683 - model_training - INFO - Train set: 12165 samples, Test set: 3042 samples
2025-04-14 10:31:45,688 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:31:45,691 - feature_engineering - INFO - Using 31 features for model training
2025-04-14 10:31:45,694 - model_training - INFO - Original class distribution: [8523 2740]
2025-04-14 10:31:45,731 - model_training - INFO - Class distribution after SMOTE: [8523 8523]
2025-04-14 10:31:45,731 - __main__ - INFO - Training model...
2025-04-14 10:31:45,731 - model_training - INFO - Training Random Forest model...
2025-04-14 10:31:57,695 - __main__ - INFO - Evaluating model...
2025-04-14 10:31:57,696 - model_training - INFO - Evaluating model performance...
2025-04-14 10:31:57,811 - model_training - INFO - Model Accuracy: 0.5830
2025-04-14 10:31:57,811 - model_training - INFO - F1 Score: 0.3546
2025-04-14 10:31:57,811 - model_training - INFO - ROC AUC: 0.5943
2025-04-14 10:31:57,811 - __main__ - INFO - Saving model...
2025-04-14 10:31:57,847 - model_training - INFO - Model saved as 'stock_prediction_model.pkl'
2025-04-14 10:31:57,847 - __main__ - INFO - Generating signals for latest market data...
2025-04-14 10:31:57,847 - data_fetcher - INFO - Fetching latest market data from 2025-04-09 to 2025-04-14
2025-04-14 10:31:57,847 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:57,847 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CBA.AX', 1, 0])
2025-04-14 10:31:57,848 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:57,848 - yfinance - DEBUG - CBA.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:31:57+10:00', 'period2': '2025-04-14 10:31:57+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:57,848 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:57,848 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:57,848 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CBA.AX
2025-04-14 10:31:57,848 - yfinance - DEBUG - params={'period1': 1744158717, 'period2': 1744590717, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:57,848 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:57,848 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:57,848 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:57,848 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:57,848 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:57,848 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:57,848 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:58,023 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CBA.AX?period1=1744158717&period2=1744590717&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1528
2025-04-14 10:31:58,023 - yfinance - DEBUG - response code=200
2025-04-14 10:31:58,023 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:58,023 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:58,024 - yfinance - DEBUG - CBA.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:11:56
2025-04-14 10:31:58,025 - yfinance - DEBUG - CBA.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:11:56+10:00
2025-04-14 10:31:58,026 - yfinance - DEBUG - CBA.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,028 - yfinance - DEBUG - CBA.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,028 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:58,028 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:58,028 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:58,028 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['BHP.AX', 1, 0])
2025-04-14 10:31:58,028 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:58,028 - yfinance - DEBUG - BHP.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:31:57+10:00', 'period2': '2025-04-14 10:31:57+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,029 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:58,029 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:58,029 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/BHP.AX
2025-04-14 10:31:58,029 - yfinance - DEBUG - params={'period1': 1744158717, 'period2': 1744590717, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,029 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:58,029 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:58,029 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,029 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:58,029 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:58,029 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,029 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:58,222 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/BHP.AX?period1=1744158717&period2=1744590717&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1486
2025-04-14 10:31:58,223 - yfinance - DEBUG - response code=200
2025-04-14 10:31:58,223 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:58,224 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:58,225 - yfinance - DEBUG - BHP.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:11:56
2025-04-14 10:31:58,227 - yfinance - DEBUG - BHP.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:11:56+10:00
2025-04-14 10:31:58,228 - yfinance - DEBUG - BHP.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,230 - yfinance - DEBUG - BHP.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,230 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:58,230 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:58,230 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:58,230 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CSL.AX', 1, 0])
2025-04-14 10:31:58,230 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:58,230 - yfinance - DEBUG - CSL.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:31:57+10:00', 'period2': '2025-04-14 10:31:57+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,230 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:58,230 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:58,230 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CSL.AX
2025-04-14 10:31:58,230 - yfinance - DEBUG - params={'period1': 1744158717, 'period2': 1744590717, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,230 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:58,230 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:58,230 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,230 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:58,230 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:58,230 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,230 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:58,409 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CSL.AX?period1=1744158717&period2=1744590717&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1497
2025-04-14 10:31:58,410 - yfinance - DEBUG - response code=200
2025-04-14 10:31:58,411 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:58,411 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:58,412 - yfinance - DEBUG - CSL.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:11:57
2025-04-14 10:31:58,413 - yfinance - DEBUG - CSL.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:11:57+10:00
2025-04-14 10:31:58,415 - yfinance - DEBUG - CSL.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,416 - yfinance - DEBUG - CSL.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,416 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:58,416 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:58,416 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:58,416 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['WBC.AX', 1, 0])
2025-04-14 10:31:58,417 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:58,417 - yfinance - DEBUG - WBC.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:31:57+10:00', 'period2': '2025-04-14 10:31:57+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,417 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:58,417 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:58,417 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/WBC.AX
2025-04-14 10:31:58,417 - yfinance - DEBUG - params={'period1': 1744158717, 'period2': 1744590717, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,417 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:58,417 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:58,417 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,417 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:58,417 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:58,417 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,417 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:58,598 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/WBC.AX?period1=1744158717&period2=1744590717&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1516
2025-04-14 10:31:58,598 - yfinance - DEBUG - response code=200
2025-04-14 10:31:58,598 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:58,599 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:58,600 - yfinance - DEBUG - WBC.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:11:57
2025-04-14 10:31:58,601 - yfinance - DEBUG - WBC.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:11:57+10:00
2025-04-14 10:31:58,603 - yfinance - DEBUG - WBC.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,605 - yfinance - DEBUG - WBC.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,605 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:58,605 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:58,605 - yfinance - DEBUG - Entering history()
2025-04-14 10:31:58,605 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NAB.AX', 1, 0])
2025-04-14 10:31:58,605 - yfinance - DEBUG -  Entering history()
2025-04-14 10:31:58,605 - yfinance - DEBUG - NAB.AX: Yahoo GET parameters: {'period1': '2025-04-09 10:31:57+10:00', 'period2': '2025-04-14 10:31:57+10:00', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,605 - yfinance - DEBUG -   Entering get()
2025-04-14 10:31:58,605 - yfinance - DEBUG -    Entering _make_request()
2025-04-14 10:31:58,605 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NAB.AX
2025-04-14 10:31:58,605 - yfinance - DEBUG - params={'period1': 1744158717, 'period2': 1744590717, 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-04-14 10:31:58,605 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-04-14 10:31:58,605 - yfinance - DEBUG - cookie_mode = 'basic'
2025-04-14 10:31:58,605 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,605 - yfinance - DEBUG - reusing cookie
2025-04-14 10:31:58,605 - yfinance - DEBUG - reusing crumb
2025-04-14 10:31:58,605 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-04-14 10:31:58,605 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-04-14 10:31:58,795 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NAB.AX?period1=1744158717&period2=1744590717&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=g3dXUdqXiLV HTTP/1.1" 200 1503
2025-04-14 10:31:58,795 - yfinance - DEBUG - response code=200
2025-04-14 10:31:58,795 - yfinance - DEBUG -    Exiting _make_request()
2025-04-14 10:31:58,795 - yfinance - DEBUG -   Exiting get()
2025-04-14 10:31:58,795 - yfinance - DEBUG - NAB.AX: yfinance received OHLC data: 2025-04-09 00:00:00 -> 2025-04-14 00:11:56
2025-04-14 10:31:58,796 - yfinance - DEBUG - NAB.AX: OHLC after cleaning: 2025-04-09 10:00:00+10:00 -> 2025-04-14 10:11:56+10:00
2025-04-14 10:31:58,797 - yfinance - DEBUG - NAB.AX: OHLC after combining events: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,798 - yfinance - DEBUG - NAB.AX: yfinance returning OHLC: 2025-04-09 00:00:00+10:00 -> 2025-04-14 00:00:00+10:00
2025-04-14 10:31:58,798 - yfinance - DEBUG -  Exiting history()
2025-04-14 10:31:58,798 - yfinance - DEBUG - Exiting history()
2025-04-14 10:31:58,799 - feature_engineering - INFO - Adding technical indicators...
2025-04-14 10:31:58,805 - signal_generator - INFO - Technical indicators added to latest data
2025-04-14 10:31:58,849 - model_training - INFO - Model loaded from 'stock_prediction_model.pkl'
2025-04-14 10:31:58,856 - signal_generator - INFO - Generated signals for 5 stocks
2025-04-14 10:31:58,858 - __main__ - INFO - Signal report: {'status': 'success', 'message': 'Generated signals for 5 stocks', 'signal_summary': {'Hold': ['CBA.AX', 'CSL.AX', 'BHP.AX', 'WBC.AX', 'NAB.AX']}, 'signals': [{'Ticker': 'CBA.AX', 'Close': 155.3300018310547, 'Buy_Signal': 0, 'Buy_Probability': 0.5755010269985723, 'Recommendation': 'Hold'}, {'Ticker': 'CSL.AX', 'Close': 234.97000122070312, 'Buy_Signal': 0, 'Buy_Probability': 0.5270927244236013, 'Recommendation': 'Hold'}, {'Ticker': 'BHP.AX', 'Close': 36.470001220703125, 'Buy_Signal': 0, 'Buy_Probability': 0.5048497603150887, 'Recommendation': 'Hold'}, {'Ticker': 'WBC.AX', 'Close': 30.209999084472656, 'Buy_Signal': 0, 'Buy_Probability': 0.4914008045517202, 'Recommendation': 'Hold'}, {'Ticker': 'NAB.AX', 'Close': 33.38999938964844, 'Buy_Signal': 0, 'Buy_Probability': 0.42329760268551103, 'Recommendation': 'Hold'}]}
2025-04-14 10:31:58,858 - __main__ - INFO - Running backtest...
2025-04-14 10:31:58,859 - backtest_engine - INFO - Setting up backtest...
2025-04-14 10:31:58,887 - backtest_engine - INFO - Running backtest...
2025-04-14 10:31:58,887 - backtest_engine - INFO - Initial portfolio value: $100000.00
2025-04-14 10:32:00,001 - backtest_engine - INFO - Final portfolio value: $100000.00
2025-04-14 10:32:00,002 - backtest_engine - INFO - Return: 0.00%
2025-04-14 10:32:00,002 - __main__ - ERROR - Error in main execution: unsupported format string passed to NoneType.__format__
Traceback (most recent call last):
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/main.py", line 108, in main
    backtest_results = run_backtest(historical_data, signals)
  File "/Users/qhungmai/ai-hedge-fund/api_fetch/stock_prediction_system/backtest_engine.py", line 199, in run_backtest
    logger.info(f"Sharpe Ratio: {sharpe_ratio:.2f}")
                                ^^^^^^^^^^^^^^^^^^
TypeError: unsupported format string passed to NoneType.__format__
